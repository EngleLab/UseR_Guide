<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Tutorial for the EngleLab</title>
  <meta name="description" content="This is a short R Tutorial for the EngleLab">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Tutorial for the EngleLab" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a short R Tutorial for the EngleLab" />
  <meta name="github-repo" content="dr-JT" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Tutorial for the EngleLab" />
  
  <meta name="twitter:description" content="This is a short R Tutorial for the EngleLab" />
  

<meta name="author" content="Jason Tsukahara">


<meta name="date" content="2018-11-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-tidyverse.html">
<link rel="next" href="organization-and-good-practices.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation</a><ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#the-r-studio-environemnt"><i class="fa fa-check"></i><b>1.3</b> The R Studio Environemnt</a></li>
<li class="chapter" data-level="1.4" data-path="installation.html"><a href="installation.html#r-studio-settings"><i class="fa fa-check"></i><b>1.4</b> R Studio Settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#creating-r-objects"><i class="fa fa-check"></i><b>2.1</b> Creating R objects</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basics.html"><a href="basics.html#classes"><i class="fa fa-check"></i><b>2.1.1</b> Classes</a></li>
<li class="chapter" data-level="2.1.2" data-path="basics.html"><a href="basics.html#vectors"><i class="fa fa-check"></i><b>2.1.2</b> Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="basics.html"><a href="basics.html#factors"><i class="fa fa-check"></i><b>2.1.3</b> Factors</a></li>
<li class="chapter" data-level="2.1.4" data-path="basics.html"><a href="basics.html#lists"><i class="fa fa-check"></i><b>2.1.4</b> Lists</a></li>
<li class="chapter" data-level="2.1.5" data-path="basics.html"><a href="basics.html#data-frames"><i class="fa fa-check"></i><b>2.1.5</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#ifthen-statements"><i class="fa fa-check"></i><b>2.2</b> If…then Statements</a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#for-loops"><i class="fa fa-check"></i><b>2.3</b> For Loops</a></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#functions"><i class="fa fa-check"></i><b>2.4</b> Functions</a><ul>
<li class="chapter" data-level="2.4.1" data-path="basics.html"><a href="basics.html#creating-your-own-functions"><i class="fa fa-check"></i><b>2.4.1</b> Creating Your Own Functions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="basics.html"><a href="basics.html#r-packages"><i class="fa fa-check"></i><b>2.5</b> R Packages</a></li>
<li class="chapter" data-level="2.6" data-path="basics.html"><a href="basics.html#installing-and-loading-r-packages"><i class="fa fa-check"></i><b>2.6</b> Installing and Loading R Packages</a></li>
<li class="chapter" data-level="2.7" data-path="basics.html"><a href="basics.html#more-r-basic-resources"><i class="fa fa-check"></i><b>2.7</b> More R Basic Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>3</b> Workflow</a></li>
<li class="chapter" data-level="4" data-path="the-tidyverse.html"><a href="the-tidyverse.html"><i class="fa fa-check"></i><b>4</b> The tidyverse</a><ul>
<li class="chapter" data-level="4.1" data-path="the-tidyverse.html"><a href="the-tidyverse.html#readr---import"><i class="fa fa-check"></i><b>4.1</b> readr - import</a></li>
<li class="chapter" data-level="4.2" data-path="the-tidyverse.html"><a href="the-tidyverse.html#dplyr"><i class="fa fa-check"></i><b>4.2</b> dplyr</a><ul>
<li class="chapter" data-level="4.2.1" data-path="the-tidyverse.html"><a href="the-tidyverse.html#rename"><i class="fa fa-check"></i><b>4.2.1</b> <code>rename()</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="the-tidyverse.html"><a href="the-tidyverse.html#filter"><i class="fa fa-check"></i><b>4.2.2</b> <code>filter()</code></a></li>
<li class="chapter" data-level="4.2.3" data-path="the-tidyverse.html"><a href="the-tidyverse.html#select"><i class="fa fa-check"></i><b>4.2.3</b> <code>select()</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="the-tidyverse.html"><a href="the-tidyverse.html#mutate"><i class="fa fa-check"></i><b>4.2.4</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="the-tidyverse.html"><a href="the-tidyverse.html#group_by"><i class="fa fa-check"></i><b>4.2.5</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="the-tidyverse.html"><a href="the-tidyverse.html#summarise"><i class="fa fa-check"></i><b>4.2.6</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="4.2.7" data-path="the-tidyverse.html"><a href="the-tidyverse.html#spread"><i class="fa fa-check"></i><b>4.2.7</b> <code>spread()</code></a></li>
<li class="chapter" data-level="4.2.8" data-path="the-tidyverse.html"><a href="the-tidyverse.html#pipe-operator"><i class="fa fa-check"></i><b>4.2.8</b> Pipe Operator %&gt;%</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="the-tidyverse.html"><a href="the-tidyverse.html#readr---export"><i class="fa fa-check"></i><b>4.3</b> readr - export</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="englelab-packages.html"><a href="englelab-packages.html"><i class="fa fa-check"></i><b>5</b> EngleLab Packages</a><ul>
<li class="chapter" data-level="5.1" data-path="englelab-packages.html"><a href="englelab-packages.html#englelab"><i class="fa fa-check"></i><b>5.1</b> englelab</a><ul>
<li class="chapter" data-level="5.1.1" data-path="englelab-packages.html"><a href="englelab-packages.html#tidy-raw-data-functions"><i class="fa fa-check"></i><b>5.1.1</b> “tidy” raw data functions</a></li>
<li class="chapter" data-level="5.1.2" data-path="englelab-packages.html"><a href="englelab-packages.html#score-data-functions"><i class="fa fa-check"></i><b>5.1.2</b> score data functions</a></li>
<li class="chapter" data-level="5.1.3" data-path="englelab-packages.html"><a href="englelab-packages.html#calculating-bin-scores"><i class="fa fa-check"></i><b>5.1.3</b> Calculating Bin Scores</a></li>
<li class="chapter" data-level="5.1.4" data-path="englelab-packages.html"><a href="englelab-packages.html#reliability-functions"><i class="fa fa-check"></i><b>5.1.4</b> Reliability functions</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="englelab-packages.html"><a href="englelab-packages.html#datawrangling"><i class="fa fa-check"></i><b>5.2</b> datawrangling</a><ul>
<li class="chapter" data-level="5.2.1" data-path="englelab-packages.html"><a href="englelab-packages.html#merging-data-files"><i class="fa fa-check"></i><b>5.2.1</b> Merging Data Files</a></li>
<li class="chapter" data-level="5.2.2" data-path="englelab-packages.html"><a href="englelab-packages.html#reshpaing-data"><i class="fa fa-check"></i><b>5.2.2</b> Reshpaing Data</a></li>
<li class="chapter" data-level="5.2.3" data-path="englelab-packages.html"><a href="englelab-packages.html#transformations"><i class="fa fa-check"></i><b>5.2.3</b> Transformations</a></li>
<li class="chapter" data-level="5.2.4" data-path="englelab-packages.html"><a href="englelab-packages.html#data-cleaning"><i class="fa fa-check"></i><b>5.2.4</b> Data Cleaning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html"><i class="fa fa-check"></i><b>6</b> Organization and Good Practices</a><ul>
<li class="chapter" data-level="6.1" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#r-scripts"><i class="fa fa-check"></i><b>6.1</b> R Scripts</a><ul>
<li class="chapter" data-level="6.1.1" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#general-workflow"><i class="fa fa-check"></i><b>6.1.1</b> General Workflow</a></li>
<li class="chapter" data-level="6.1.2" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#building-a-template-workflow"><i class="fa fa-check"></i><b>6.1.2</b> Building a Template Workflow</a></li>
<li class="chapter" data-level="6.1.3" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#rmlistls"><i class="fa fa-check"></i><b>6.1.3</b> rm(list=ls())</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#working-directory"><i class="fa fa-check"></i><b>6.2</b> Working Directory</a><ul>
<li class="chapter" data-level="6.2.1" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#r-projects"><i class="fa fa-check"></i><b>6.2.1</b> R Projects</a></li>
<li class="chapter" data-level="6.2.2" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#here"><i class="fa fa-check"></i><b>6.2.2</b> here()</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#the-masterscript"><i class="fa fa-check"></i><b>6.3</b> The masterscript</a></li>
<li class="chapter" data-level="6.4" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#folder-organization"><i class="fa fa-check"></i><b>6.4</b> Folder Organization</a></li>
<li class="chapter" data-level="6.5" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#naming-r-scripts"><i class="fa fa-check"></i><b>6.5</b> Naming R Scripts</a></li>
<li class="chapter" data-level="6.6" data-path="organization-and-good-practices.html"><a href="organization-and-good-practices.html#summary"><i class="fa fa-check"></i><b>6.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="example-data-preparation.html"><a href="example-data-preparation.html"><i class="fa fa-check"></i><b>7</b> Example: Data Preparation</a><ul>
<li class="chapter" data-level="7.1" data-path="example-data-preparation.html"><a href="example-data-preparation.html#initial-setup"><i class="fa fa-check"></i><b>7.1</b> Initial Setup</a><ul>
<li class="chapter" data-level="7.1.1" data-path="example-data-preparation.html"><a href="example-data-preparation.html#set-up-directory-structure"><i class="fa fa-check"></i><b>7.1.1</b> Set up directory structure</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="example-data-preparation.html"><a href="example-data-preparation.html#masterscript"><i class="fa fa-check"></i><b>7.2</b> Masterscript</a></li>
<li class="chapter" data-level="7.3" data-path="example-data-preparation.html"><a href="example-data-preparation.html#creating-messy-merged-file"><i class="fa fa-check"></i><b>7.3</b> Creating “messy” Merged File</a><ul>
<li class="chapter" data-level="7.3.1" data-path="example-data-preparation.html"><a href="example-data-preparation.html#flanker-data-set"><i class="fa fa-check"></i><b>7.3.1</b> Flanker Data Set</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="example-data-preparation.html"><a href="example-data-preparation.html#messy-to-tidy"><i class="fa fa-check"></i><b>7.4</b> “messy” to “tidy”</a><ul>
<li class="chapter" data-level="7.4.1" data-path="example-data-preparation.html"><a href="example-data-preparation.html#what-to-include"><i class="fa fa-check"></i><b>7.4.1</b> What to Include</a></li>
<li class="chapter" data-level="7.4.2" data-path="example-data-preparation.html"><a href="example-data-preparation.html#import-messy-data"><i class="fa fa-check"></i><b>7.4.2</b> Import “messy” data</a></li>
<li class="chapter" data-level="7.4.3" data-path="example-data-preparation.html"><a href="example-data-preparation.html#remove-duplicate-subjects"><i class="fa fa-check"></i><b>7.4.3</b> Remove Duplicate Subjects</a></li>
<li class="chapter" data-level="7.4.4" data-path="example-data-preparation.html"><a href="example-data-preparation.html#filter-1"><i class="fa fa-check"></i><b>7.4.4</b> Filter</a></li>
<li class="chapter" data-level="7.4.5" data-path="example-data-preparation.html"><a href="example-data-preparation.html#rename-1"><i class="fa fa-check"></i><b>7.4.5</b> Rename</a></li>
<li class="chapter" data-level="7.4.6" data-path="example-data-preparation.html"><a href="example-data-preparation.html#mutate-1"><i class="fa fa-check"></i><b>7.4.6</b> Mutate</a></li>
<li class="chapter" data-level="7.4.7" data-path="example-data-preparation.html"><a href="example-data-preparation.html#select-1"><i class="fa fa-check"></i><b>7.4.7</b> Select</a></li>
<li class="chapter" data-level="7.4.8" data-path="example-data-preparation.html"><a href="example-data-preparation.html#save-to-file"><i class="fa fa-check"></i><b>7.4.8</b> Save to File</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="example-data-preparation.html"><a href="example-data-preparation.html#tidy-raw-to-scored"><i class="fa fa-check"></i><b>7.5</b> “tidy” raw to scored</a><ul>
<li class="chapter" data-level="7.5.1" data-path="example-data-preparation.html"><a href="example-data-preparation.html#set-up"><i class="fa fa-check"></i><b>7.5.1</b> Set up</a></li>
<li class="chapter" data-level="7.5.2" data-path="example-data-preparation.html"><a href="example-data-preparation.html#import"><i class="fa fa-check"></i><b>7.5.2</b> Import</a></li>
<li class="chapter" data-level="7.5.3" data-path="example-data-preparation.html"><a href="example-data-preparation.html#calculate-flankereffect-on-rt-and-accuracy"><i class="fa fa-check"></i><b>7.5.3</b> Calculate FlankerEffect on RT and Accuracy</a></li>
<li class="chapter" data-level="7.5.4" data-path="example-data-preparation.html"><a href="example-data-preparation.html#calculate-binned-scores"><i class="fa fa-check"></i><b>7.5.4</b> Calculate Binned Scores</a></li>
<li class="chapter" data-level="7.5.5" data-path="example-data-preparation.html"><a href="example-data-preparation.html#save-data-file"><i class="fa fa-check"></i><b>7.5.5</b> Save data file</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="example-data-preparation.html"><a href="example-data-preparation.html#source-in-masterscript"><i class="fa fa-check"></i><b>7.6</b> <code>source()</code> in Masterscript</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Tutorial for the EngleLab</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="englelab-packages" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> EngleLab Packages</h1>
<p>I have created R packages that contain functions to more easily prepare your data for statistical analysis.</p>
<p>In this chapter you will learn about the functions from two packages I created:</p>
<ul>
<li><p><strong>englelab</strong> <a href="https://github.com/EngleLab/englelab" class="uri">https://github.com/EngleLab/englelab</a></p></li>
<li><p><strong>datawrangling</strong> <a href="https://dr-jt.github.io/datawrangling" class="uri">https://dr-jt.github.io/datawrangling</a></p></li>
</ul>
<p>I am hosting these packages on GitHub and can be downloaded using the <code>devtools</code> package</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</a>
<a class="sourceLine" id="cb108-2" data-line-number="2"></a>
<a class="sourceLine" id="cb108-3" data-line-number="3">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;EngleLab/englelab&quot;</span>)</a>
<a class="sourceLine" id="cb108-4" data-line-number="4">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;dr-JT/datawrangling&quot;</span>)</a></code></pre></div>
<hr />
<div id="englelab" class="section level2">
<h2><span class="header-section-number">5.1</span> englelab</h2>
<p>The functions in the <code>englelab</code> package are to create “tidy” raw data files and scored data files from the complex span and fluid intelligence tasks we frequently use. It also contains a function to calculate scores using the binning method from [insert citation here]. There are also functions to calcualte the reliability measures; cronbach’s alpha and split-half reliability.</p>
<p>This package is intended to eventually share with other researchers who download the tasks from our website and use R to do data analysis.</p>
<div id="tidy-raw-data-functions" class="section level3">
<h3><span class="header-section-number">5.1.1</span> “tidy” raw data functions</h3>
<p>I suggest to only use the “tidy” raw functions rather than the scoring functions. The reason for this is that the scoring function does not create a “tidy” raw data file - which is useful for doing internal consitency analyses, and is just a good idea to have a “tidy” raw data file for trial-by-trial performance.</p>
<p>Here is the list of “tidy” raw data functions:</p>
<ul>
<li><p><code>raw.ospan()</code></p></li>
<li><p><code>raw.symspan()</code></p></li>
<li><p><code>raw.rotspan()</code></p></li>
<li><p><code>raw.rapm()</code></p></li>
<li><p><code>raw.numberseries()</code></p></li>
<li><p><code>raw.lettersets()</code></p></li>
</ul>
<p>These functions take as input an imported <strong>E-Merged</strong> or <strong>edat</strong> file.</p>
<p>For the complex span tasks you need to specify the number of blocks administered with the <code>blocks</code> argument. ex. <code>raw.ospan(data, blocks = 2)</code></p>
<p>The output of the raw functions will also contain columns for the subject’s final score on the task. This is why it is suggested to just use the raw functions, you can still easily grab the final score on the task from the outputed file.</p>
<div id="example" class="section level4">
<h4><span class="header-section-number">5.1.1.1</span> Example</h4>
<p>Here is an example script that uses the <code>raw.ospan()</code> function to import an E-merged data file and output a “tidy” raw data file.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="co">## Set up ####</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="co">## Load packages</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb109-4" data-line-number="4"><span class="kw">library</span>(englelab)</a>
<a class="sourceLine" id="cb109-5" data-line-number="5"></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="co">## Set import/output directories</span></a>
<a class="sourceLine" id="cb109-7" data-line-number="7">import.file &lt;-<span class="st"> &quot;data/raw/emerge/ospan.txt&quot;</span></a>
<a class="sourceLine" id="cb109-8" data-line-number="8">output.file &lt;-<span class="st"> &quot;data/raw/ospan_raw.txt&quot;</span></a>
<a class="sourceLine" id="cb109-9" data-line-number="9"><span class="co">##############</span></a>
<a class="sourceLine" id="cb109-10" data-line-number="10"></a>
<a class="sourceLine" id="cb109-11" data-line-number="11"><span class="co">## Import</span></a>
<a class="sourceLine" id="cb109-12" data-line-number="12">import &lt;-<span class="st"> </span><span class="kw">read_delim</span>(import.file), <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, escape_double =<span class="st"> </span><span class="ot">FALSE</span>, trim_ws =<span class="st"> </span><span class="ot">TRUE</span><span class="er">)</span></a>
<a class="sourceLine" id="cb109-13" data-line-number="13"></a>
<a class="sourceLine" id="cb109-14" data-line-number="14"><span class="co">## Clean up raw data file and save</span></a>
<a class="sourceLine" id="cb109-15" data-line-number="15">data_raw &lt;-<span class="st"> </span><span class="kw">raw.ospan</span>(import, <span class="dt">blocks =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb109-16" data-line-number="16"></a>
<a class="sourceLine" id="cb109-17" data-line-number="17"><span class="co">## Save data file</span></a>
<a class="sourceLine" id="cb109-18" data-line-number="18"><span class="kw">write_delim</span>(data_raw, <span class="dt">path =</span> output.file, <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">na =</span> <span class="st">&quot;&quot;</span>)</a></code></pre></div>
<hr />
</div>
</div>
<div id="score-data-functions" class="section level3">
<h3><span class="header-section-number">5.1.2</span> score data functions</h3>
<p>Again, it is suggested to use the raw functions instead of the score functions. However, here is the list of the score functions:</p>
<ul>
<li><p><code>score.ospan()</code></p></li>
<li><p><code>score.symspan()</code></p></li>
<li><p><code>score.rotspan()</code></p></li>
<li><p><code>score.rapm()</code></p></li>
<li><p><code>score.numberseries()</code></p></li>
<li><p><code>score.lettersets()</code></p></li>
</ul>
<p>Like the raw functions the score functions take as input a “messy” raw <strong>E-Merged</strong> or <strong>edat</strong> file. For the complex span tasks you need to specify the number of blocks adminestered.</p>
<hr />
</div>
<div id="calculating-bin-scores" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Calculating Bin Scores</h3>
<p>The <code>bin.score()</code> function will calculate bin scores. These are the arguments you will need to specify:</p>
<ul>
<li><p><strong>x</strong>: a dataframe with trial level data. Needs to have RT and Accuracy DVs</p></li>
<li><p><strong>rt.col</strong>: Column name in dataframe that contains the reaction time data</p></li>
<li><p><strong>accuracy.col</strong>: Column name in dataframe that contains the accuracy data</p></li>
<li><p><strong>condition.col</strong>: Column name in dataframe that contains the trial condition values</p></li>
<li><p><strong>baseline.condition</strong>: The values that specify the baseline condition (e.g. “congruent”)</p></li>
<li><p><strong>type</strong>: How should Bin trials be aggregated, “sum” or “mean” (Default: “mean”)</p></li>
<li><p><strong>id</strong>: Column name in dataframe that contains the subject identifiers</p></li>
</ul>
<p>The default argument values are:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">bin.score</span>(x, <span class="dt">rt.col =</span> <span class="st">&quot;RT&quot;</span>, <span class="dt">accuracy.col =</span> <span class="st">&quot;Accuracy&quot;</span>, <span class="dt">condition.col =</span> <span class="st">&quot;Condition&quot;</span>, <span class="dt">baseline.condition =</span> <span class="st">&quot;congruent&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mean&quot;</span>, <span class="dt">id =</span> <span class="st">&quot;Subject&quot;</span>)</a></code></pre></div>
<p>Your data file may already be setup with these default value column names. If so, then you just need to specify the dataframe.</p>
</div>
<div id="reliability-functions" class="section level3">
<h3><span class="header-section-number">5.1.4</span> Reliability functions</h3>
<div id="cronbach.alpha" class="section level4">
<h4><span class="header-section-number">5.1.4.1</span> <code>cronbach.alpha()</code></h4>
<p>This function takes as input a “tidy” raw trial-level dataframe.</p>
<ul>
<li><p><strong>x</strong>: x a dataframe with trial level data</p></li>
<li><p><strong>trial.col</strong>: The column name that identifies trial number</p></li>
<li><p><strong>value</strong>: The column name that identifies the values to be used</p></li>
<li><p><strong>id</strong>: The column name that identifies the Subject IDs.</p></li>
</ul>
<p>Cronbach’s alpha is calculated using the <code>alpha()</code> function from the <code>psych</code> package.</p>
<p>The difficulty in simply using the <code>alpha()</code> function is getting the dataframe in the correct structure. To use <code>alpha()</code> the values that reliability is going to be assessed over need to be in columns. The dataframe, then is one subject per row with a column for each value.</p>
<p>For most of our tasks, the values that will be assessed over are the individual Trial level DV (RT or Accuracy). So there needs to be one column for each Trial. This is an unusual data structure and is really only useful for calculating reliability. <code>cronbach.alpha()</code> will save you time by creating the correct data structure for you based on a more common structure that is contained in your “tidy” raw data files (one row per trial per subject, with RT and Accuracy as columns).</p>
<p>You should be able to take your “tidy” raw data as input to <code>cronbach.alpha()</code>. The output of <code>cronbach.alpha()</code> is a single value representing Cronbach’s Alpha.</p>
</div>
<div id="splithalf" class="section level4">
<h4><span class="header-section-number">5.1.4.2</span> <code>splithalf()</code></h4>
<p>This function takes as input a “tidy” raw trial-level dataframe.</p>
<ul>
<li><p><strong>x</strong>: x a dataframe with trial level data</p></li>
<li><p><strong>trial.col</strong>: The column name that identifies trial number</p></li>
<li><p><strong>value</strong>: The column name that identifies the values to be used</p></li>
<li><p><strong>id</strong>: The column name that identifies the Subject IDs.</p></li>
</ul>
<p>The default values are</p>
<p><code>splithalf(data, trial.col = &quot;Trial&quot;, value = NULL, id = &quot;Subject&quot;)</code></p>
<p>The data is split in half by even and odd trials.</p>
<p>You should be able to take your “tidy” raw data as input to <code>splithalf()</code>. The output of <code>splithalf()</code> is a single value representing split-half reliability.</p>
<hr />
</div>
</div>
</div>
<div id="datawrangling" class="section level2">
<h2><span class="header-section-number">5.2</span> datawrangling</h2>
<p>It would take too long to cover each of the functions in this package one-by-one. I will cover just a few that are the most commonly used functions. For a descriptions of each function see <a href="https://dr-jt.github.io/datawrangling/reference/index.html" class="uri">https://dr-jt.github.io/datawrangling/reference/index.html</a></p>
<div id="merging-data-files" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Merging Data Files</h3>
<p>You might find yourself in a situation where you need to merge multiple text files together. There are two types of merge operations that can be performed.</p>
<p>In R, a “join” is merging dataframes together that have at least some rows in common (e.g. Same Subject IDs) and have at least one column that is different. The rows that are common serve as the reference for how to “join” the dataframes together.</p>
<p>In R, a “bind” is combining datarames together by staking either the rows or columns. It is unlikely that we you will need to do a column bind so we can skip that. A row “bind” takes dataframes that have the same columns but different rows. This will happen if you have separate data files for each subject from the same task. Each subject data file will have their unique rows (subject by trial level data) but they will all have the same columns.</p>
<p>The E-Merge software program is performing a row “bind” of each subject .edat file. In E-Prime 2 we have to go through E-Merge to do this process. However, in E-Prime 3.0 there is the option to output an exported .edat file as a tab-delimited .txt file. Using the <code>files.bind()</code> function from the <code>datawrangling</code> package will allow us to skip the E-Merge step.</p>
<p>The <code>datawrangling</code> package contains two functions to merge data files together:</p>
<ul>
<li><p><code>files.join()</code></p></li>
<li><p><code>files.bind()</code></p></li>
</ul>
<p>They both work in a similar way. The files you want to merge need to be in the same folder on your computer. You specify the location of this folder using the <code>path =</code> argument. You need to specify a pattern that uniquely identifies the files you want to merge (e.g. “.txt”, or “Flanker”) using the <code>pattern =</code> argument. Then specify the directory and filename you want to save the merge file to using the <code>output.file =</code> argument.</p>
<p>Here are the arguments that can be specified:</p>
<ul>
<li><p><strong>path</strong>: Folder location of files to be merged</p></li>
<li><p><strong>pattern</strong>: Pattern to identify files to be merged</p></li>
<li><p><strong>delim</strong>: Delimiter used in files. Passed onto <code>readr::read_delim()</code></p></li>
<li><p><strong>na</strong>: How are missing values defined in files to be merged. Passed to <code>readr::write_delim()</code></p></li>
<li><p><strong>output.file</strong>: File name and path to be saved to.</p></li>
<li><p><strong>id</strong>: Subject ID column name. Passed onto <code>plyr::join_all(by = id)</code>. <strong>ONLY for <code>files.join()</code></strong></p></li>
<li><p><strong>bind</strong>: The type of bind to perform (default = “rows”). <strong>ONLY for <code>files.bind()</code></strong></p></li>
</ul>
</div>
<div id="reshpaing-data" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Reshpaing Data</h3>
<p>To run a statistical test usually requires your data is in the right format. For instance, to run a correlation or regression, you should have only one subject per row, and the columns contain values of each variable. The “messy” or “tidy” raw trial level data you start with are not in this format and so it is likely you will have to reshape your data to prepare it for statistical analyses.</p>
<p>In Chapter 4 you saw how to do this using the <code>spread()</code> function from the <code>tidyr</code> package. One limitation of <code>spread()</code> is that you can only spread on one key column or value column at a time.</p>
<p>The <code>reshape.spread()</code> function allows you to <code>spred()</code> on multiple key columns or value colunns. If you are spreading on multiple key columns you need to specify how you want the names of those values to be merged.</p>
<p>The arguments you can specify for <code>reshape.spread()</code> are:</p>
<ul>
<li><p><strong>x</strong>: dataframe</p></li>
<li><p><strong>variables</strong>: The variable used for spreading</p></li>
<li><p><strong>variables_combine.name</strong>: If using more than one variables column then specify name of a new combined column</p></li>
<li><p><strong>variables_combine.sep</strong>: if using more than one variables column then specifiy how values should be seperated when combine</p></li>
<li><p><strong>values</strong>: A vector of columns that contain the values to be spread on</p></li>
<li><p><strong>id</strong>: What column is not being reorganized and needs to be preserved. Usually “Subject”</p></li>
<li><p><strong>fill</strong>: Passed to spread() fill parameter</p></li>
</ul>
<p>For example, if you had a dataframe two rows per subject containing mean RT and mean Accuracy on congruent and incongruent trials, and you want to spread on both RT and Accuracy by Condition.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1">data &lt;-<span class="st"> </span><span class="kw">reshape.spread</span>(data, <span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;Accuracy.mean&quot;</span>), <span class="dt">id =</span> <span class="st">&quot;Subject&quot;</span>)</a></code></pre></div>
</div>
<div id="transformations" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Transformations</h3>
<p>There are a set of function is <code>datawrangling</code> to allow you to more easily transform column values into new variables and to do data cleaning.</p>
<div id="create-composites" class="section level4">
<h4><span class="header-section-number">5.2.3.1</span> Create Composites</h4>
<p>The function <code>composite()</code> will create composite scores out of specified columns. Right now you can only create “mean” composite scores. In the future I plan on adding “sum” and “factor score” composite types.</p>
<p>Here is a list of the arguments you can specifiy:</p>
<ul>
<li><p><strong>x</strong>: dataframe</p></li>
<li><p><strong>variables</strong>: c() of columns to create the composite from</p></li>
<li><p><strong>type</strong>: What type of composite should be calculated?, i.e. mean or sum. (Default = “mean”).</p></li>
<li><p><strong>standardize</strong>: Logical. Do you want to calculate the composite based on standardized (z-score) values? (Default = TRUE)</p></li>
<li><p><strong>name</strong>: Name of the new composite variable to be created</p></li>
<li><p><strong>missing.allowed</strong>: Criteria for the number of variables that can having missing values and still calculate a composite for that subject</p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="kw">composite</span>(data, </a>
<a class="sourceLine" id="cb112-4" data-line-number="4">          <span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;RAPM&quot;</span>, <span class="st">&quot;NumberSeries&quot;</span>, <span class="st">&quot;LetterSets&quot;</span>), </a>
<a class="sourceLine" id="cb112-5" data-line-number="5">          <span class="dt">type =</span> <span class="st">&quot;mean&quot;</span>,</a>
<a class="sourceLine" id="cb112-6" data-line-number="6">          <span class="dt">standardize =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb112-7" data-line-number="7">          <span class="dt">name =</span> <span class="st">&quot;Gf&quot;</span>,</a>
<a class="sourceLine" id="cb112-8" data-line-number="8">          <span class="dt">missing.allowed =</span> <span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="centering-and-z-scoring" class="section level4">
<h4><span class="header-section-number">5.2.3.2</span> Centering and Z-scoring</h4>
<p>The function <code>center()</code> will create either unstandardized or standardized (z-scored) centered variables. The list of arguments that can be passed onto the function are:</p>
<ul>
<li><p><strong>x</strong>: dataframe</p></li>
<li><p><strong>variables</strong>: c() of columns to center</p></li>
<li><p><strong>standardize</strong>: Logical. Do you want to calculate zscores? (Default = FALSE)</p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb113-2" data-line-number="2"></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="kw">center</span>(data, </a>
<a class="sourceLine" id="cb113-4" data-line-number="4">       <span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;RT&quot;</span>),</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">       <span class="dt">standardize =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<hr />
</div>
</div>
<div id="data-cleaning" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Data Cleaning</h3>
<div id="trimming" class="section level4">
<h4><span class="header-section-number">5.2.4.1</span> Trimming</h4>
<p>The function <code>trim()</code> will replace outlier scores that exceed a certain z-score cutoff.</p>
<p>There are several options for how to replace the outlier scores. Replace with</p>
<ul>
<li><p>“NA” (missing value)</p></li>
<li><p>“cutoff” (the z-score cutoff value, e.g. 3.5 SDs)</p></li>
<li><p>“mean”</p></li>
<li><p>“median”</p></li>
</ul>
<p>The arguments that can be specified are:</p>
<ul>
<li><p><strong>x</strong>: dataframe</p></li>
<li><p><strong>variables</strong>: c() of variables to be trimmed. option to set <code>variables = &quot;all&quot;</code> to trim all variables in a dataframe. But then must specify <code>id =</code></p></li>
<li><p><strong>cutoff</strong>: z-score cutoff to use for trimming (default: 3.5)</p></li>
<li><p><strong>replace</strong>: What value should the outlier values be replaced with. (default: replace = “NA”)</p></li>
<li><p><strong>id</strong>: Column name that contains subject IDs. **ONLY needs to be used if <code>variables = &quot;all&quot;</code></p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb114-2" data-line-number="2"></a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="kw">trim</span>(data, </a>
<a class="sourceLine" id="cb114-4" data-line-number="4">     <span class="dt">variables =</span> <span class="st">&quot;RT&quot;</span>,</a>
<a class="sourceLine" id="cb114-5" data-line-number="5">     <span class="dt">cutoff =</span> <span class="fl">3.5</span></a>
<a class="sourceLine" id="cb114-6" data-line-number="6">     <span class="dt">replace =</span> <span class="st">&quot;cutoff&quot;</span>)</a></code></pre></div>
<hr />
</div>
<div id="latent-variable-criteria" class="section level4">
<h4><span class="header-section-number">5.2.4.2</span> Latent variable criteria</h4>
<p>The function <code>remove.latent()</code> will remove subjects who have missing data on too many tasks for a construct(s).</p>
<p>The factor structure needs to be specified in the <code>factor.list</code> argument. For example,</p>
<p><code>factor.list = list(WMC = c(&quot;OSpan&quot;, &quot;SymSpan&quot;, &quot;RotSpan&quot;), Gf = c(&quot;RAPM&quot;, &quot;LetterSets&quot;, &quot;NumberSeries&quot;))</code></p>
<p>The arguments that can be specified are:</p>
<ul>
<li><p><strong>x</strong>: dataframe</p></li>
<li><p><strong>factor.list</strong>: list of factors and tasks</p></li>
<li><p><strong>missing.allowed</strong>: Proportion of tasks allowed to be missing</p></li>
<li><p><strong>id</strong>: Subject ID variable</p></li>
<li><p><strong>output.dir</strong>: File directory to save removed subjects to [OPTIONAL]</p></li>
<li><p><strong>output.file</strong>: File name to save removed subjects to [OPTIONAL]</p></li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb115-2" data-line-number="2"></a>
<a class="sourceLine" id="cb115-3" data-line-number="3"><span class="kw">remove.latent</span>(data,</a>
<a class="sourceLine" id="cb115-4" data-line-number="4">              <span class="dt">factor.list =</span> <span class="kw">list</span>(<span class="dt">WMC =</span> <span class="kw">c</span>(<span class="st">&quot;OSpan&quot;</span>, <span class="st">&quot;SymSpan&quot;</span>, <span class="st">&quot;RotSpan&quot;</span>), </a>
<a class="sourceLine" id="cb115-5" data-line-number="5">                                 <span class="dt">Gf =</span> <span class="kw">c</span>(<span class="st">&quot;RAPM&quot;</span>, <span class="st">&quot;LetterSets&quot;</span>, <span class="st">&quot;NumberSeries&quot;</span>)),</a>
<a class="sourceLine" id="cb115-6" data-line-number="6">              <span class="dt">missing.allowed =</span> <span class="fl">.5</span>,</a>
<a class="sourceLine" id="cb115-7" data-line-number="7">              <span class="dt">id =</span> <span class="st">&quot;Subject&quot;</span>)</a></code></pre></div>
<hr />
<p><strong>Now on to scoring the “tidy” raw data file</strong></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="organization-and-good-practices.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
