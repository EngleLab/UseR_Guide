<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 14 Tidy to Scored: 1_task_score.R | EngleLab: UseR Guide</title>
  <meta name="description" content="This is a useR Guide for the EngleLab">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 14 Tidy to Scored: 1_task_score.R | EngleLab: UseR Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a useR Guide for the EngleLab" />
  <meta name="github-repo" content="EngleLab" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Tidy to Scored: 1_task_score.R | EngleLab: UseR Guide" />
  
  <meta name="twitter:description" content="This is a useR Guide for the EngleLab" />
  

<meta name="author" content="Jason Tsukahara">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="example-data-flanker.html">
<link rel="next" href="merge-create-a-final-data-file.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EngleLab: UseR Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-guide"><i class="fa fa-check"></i>How to use this guide</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reseach-project-workflow"><i class="fa fa-check"></i>Reseach Project Workflow</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started in R</b></span></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation</a><ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#the-r-studio-environemnt"><i class="fa fa-check"></i><b>1.3</b> The R Studio Environemnt</a></li>
<li class="chapter" data-level="1.4" data-path="installation.html"><a href="installation.html#r-studio-settings"><i class="fa fa-check"></i><b>1.4</b> R Studio Settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#creating-r-objects"><i class="fa fa-check"></i><b>2.1</b> Creating R objects</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-r.html"><a href="basic-r.html#classes"><i class="fa fa-check"></i><b>2.1.1</b> Classes</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>2.1.2</b> Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-r.html"><a href="basic-r.html#factors"><i class="fa fa-check"></i><b>2.1.3</b> Factors</a></li>
<li class="chapter" data-level="2.1.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>2.1.4</b> Lists</a></li>
<li class="chapter" data-level="2.1.5" data-path="basic-r.html"><a href="basic-r.html#data-frames"><i class="fa fa-check"></i><b>2.1.5</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#ifthen-statements"><i class="fa fa-check"></i><b>2.2</b> If…then Statements</a></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basic-r.html"><a href="basic-r.html#installing-and-loading-r-packages"><i class="fa fa-check"></i><b>2.3.1</b> Installing and Loading R Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#more-r-basic-resources"><i class="fa fa-check"></i><b>2.4</b> More R Basic Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>3</b> Intermediate R</a><ul>
<li class="chapter" data-level="3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loops"><i class="fa fa-check"></i><b>3.1</b> For Loops</a></li>
<li class="chapter" data-level="3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#creating-your-own-functions"><i class="fa fa-check"></i><b>3.2.1</b> Creating Your Own Functions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Working with Data</b></span></li>
<li class="chapter" data-level="" data-path="working-with-data-overview.html"><a href="working-with-data-overview.html"><i class="fa fa-check"></i>Working with Data: Overview</a></li>
<li class="chapter" data-level="4" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html"><i class="fa fa-check"></i><b>4</b> Importing and Outputing Data</a><ul>
<li class="chapter" data-level="4.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#csv"><i class="fa fa-check"></i><b>4.1</b> CSV</a><ul>
<li class="chapter" data-level="4.1.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.csv"><i class="fa fa-check"></i><b>4.1.1</b> Import <code>.csv</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.csv"><i class="fa fa-check"></i><b>4.1.2</b> Output <code>.csv</code></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#tab-delimited"><i class="fa fa-check"></i><b>4.2</b> Tab-Delimited</a><ul>
<li class="chapter" data-level="4.2.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.txt"><i class="fa fa-check"></i><b>4.2.1</b> Import <code>.txt</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.txt"><i class="fa fa-check"></i><b>4.2.2</b> Output <code>.txt</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#spss"><i class="fa fa-check"></i><b>4.3</b> SPSS</a><ul>
<li class="chapter" data-level="4.3.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.sav"><i class="fa fa-check"></i><b>4.3.1</b> Import <code>.sav</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.sav"><i class="fa fa-check"></i><b>4.3.2</b> Output <code>.sav</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#rstudio-import-gui"><i class="fa fa-check"></i><b>4.4</b> RStudio Import GUI</a></li>
<li class="chapter" data-level="4.5" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#merging-data-files"><i class="fa fa-check"></i><b>4.5</b> Merging Data Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html"><i class="fa fa-check"></i><b>5</b> Data Manipulation using <code>dplyr</code></a><ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#setup"><i class="fa fa-check"></i><b>5.1</b> Setup</a></li>
<li class="chapter" data-level="5.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#import"><i class="fa fa-check"></i><b>5.2</b> Import</a></li>
<li class="chapter" data-level="5.3" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#rename"><i class="fa fa-check"></i><b>5.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="5.4" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#filter"><i class="fa fa-check"></i><b>5.4</b> <code>filter()</code></a></li>
<li class="chapter" data-level="5.5" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#select"><i class="fa fa-check"></i><b>5.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="5.6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#mutate"><i class="fa fa-check"></i><b>5.6</b> <code>mutate()</code></a><ul>
<li class="chapter" data-level="5.6.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#changing-values-in-an-existing-column"><i class="fa fa-check"></i><b>5.6.1</b> Changing values in an existing column</a></li>
<li class="chapter" data-level="5.6.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#creating-a-new-column"><i class="fa fa-check"></i><b>5.6.2</b> Creating a new column</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#group_by"><i class="fa fa-check"></i><b>5.7</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="5.8" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#summarise"><i class="fa fa-check"></i><b>5.8</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="5.9" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#spread"><i class="fa fa-check"></i><b>5.9</b> <code>spread()</code></a></li>
<li class="chapter" data-level="5.10" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#pipe-operator"><i class="fa fa-check"></i><b>5.10</b> Pipe Operator %&gt;%</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html"><i class="fa fa-check"></i><b>6</b> Common Data Manipulations</a><ul>
<li class="chapter" data-level="6.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#descriptive-statistics"><i class="fa fa-check"></i><b>6.1</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="6.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#centering-and-standardizing-variables"><i class="fa fa-check"></i><b>6.2</b> Centering and Standardizing Variables</a></li>
<li class="chapter" data-level="6.3" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#trimming"><i class="fa fa-check"></i><b>6.3</b> Trimming</a></li>
<li class="chapter" data-level="6.4" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#composites"><i class="fa fa-check"></i><b>6.4</b> Composites</a></li>
<li class="chapter" data-level="6.5" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#scale-transformations"><i class="fa fa-check"></i><b>6.5</b> Scale Transformations</a><ul>
<li class="chapter" data-level="6.5.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#log"><i class="fa fa-check"></i><b>6.5.1</b> log</a></li>
<li class="chapter" data-level="6.5.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#polynomial"><i class="fa fa-check"></i><b>6.5.2</b> polynomial</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#custom-transformations"><i class="fa fa-check"></i><b>6.6</b> Custom Transformations</a></li>
</ul></li>
<li class="part"><span><b>III Reproducible Workflows</b></span></li>
<li class="chapter" data-level="" data-path="reproducible-workflows-overview.html"><a href="reproducible-workflows-overview.html"><i class="fa fa-check"></i>Reproducible Workflows: Overview</a></li>
<li class="chapter" data-level="7" data-path="project-organization.html"><a href="project-organization.html"><i class="fa fa-check"></i><b>7</b> Project Organization</a><ul>
<li class="chapter" data-level="7.1" data-path="project-organization.html"><a href="project-organization.html#data-collection"><i class="fa fa-check"></i><b>7.1</b> Data Collection</a></li>
<li class="chapter" data-level="7.2" data-path="project-organization.html"><a href="project-organization.html#data-preparation"><i class="fa fa-check"></i><b>7.2</b> Data Preparation</a></li>
<li class="chapter" data-level="7.3" data-path="project-organization.html"><a href="project-organization.html#data-analysis"><i class="fa fa-check"></i><b>7.3</b> Data Analysis</a></li>
<li class="chapter" data-level="7.4" data-path="project-organization.html"><a href="project-organization.html#workflow-package"><i class="fa fa-check"></i><b>7.4</b> <code>workflow</code> package</a><ul>
<li class="chapter" data-level="7.4.1" data-path="project-organization.html"><a href="project-organization.html#install"><i class="fa fa-check"></i><b>7.4.1</b> Install</a></li>
<li class="chapter" data-level="7.4.2" data-path="project-organization.html"><a href="project-organization.html#create-a-new-r-project"><i class="fa fa-check"></i><b>7.4.2</b> Create a New R Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reproducible-practices.html"><a href="reproducible-practices.html"><i class="fa fa-check"></i><b>8</b> Reproducible Practices</a><ul>
<li class="chapter" data-level="8.1" data-path="reproducible-practices.html"><a href="reproducible-practices.html#what-is-real"><i class="fa fa-check"></i><b>8.1</b> What is real?</a></li>
<li class="chapter" data-level="8.2" data-path="reproducible-practices.html"><a href="reproducible-practices.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>8.2</b> Where does your analysis live?</a><ul>
<li class="chapter" data-level="8.2.1" data-path="reproducible-practices.html"><a href="reproducible-practices.html#project-level"><i class="fa fa-check"></i><b>8.2.1</b> Project Level</a></li>
<li class="chapter" data-level="8.2.2" data-path="reproducible-practices.html"><a href="reproducible-practices.html#script-level"><i class="fa fa-check"></i><b>8.2.2</b> Script Level</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="reproducible-practices.html"><a href="reproducible-practices.html#environment"><i class="fa fa-check"></i><b>8.3</b> Environment</a><ul>
<li class="chapter" data-level="8.3.1" data-path="reproducible-practices.html"><a href="reproducible-practices.html#working-directory"><i class="fa fa-check"></i><b>8.3.1</b> Working Directory</a></li>
<li class="chapter" data-level="8.3.2" data-path="reproducible-practices.html"><a href="reproducible-practices.html#loaded-packages"><i class="fa fa-check"></i><b>8.3.2</b> Loaded Packages</a></li>
<li class="chapter" data-level="8.3.3" data-path="reproducible-practices.html"><a href="reproducible-practices.html#objects"><i class="fa fa-check"></i><b>8.3.3</b> Objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-script-templates.html"><a href="r-script-templates.html"><i class="fa fa-check"></i><b>9</b> R Script Templates</a><ul>
<li class="chapter" data-level="9.1" data-path="r-script-templates.html"><a href="r-script-templates.html#download-templates"><i class="fa fa-check"></i><b>9.1</b> Download Templates</a><ul>
<li class="chapter" data-level="9.1.1" data-path="r-script-templates.html"><a href="r-script-templates.html#install-workflow-package"><i class="fa fa-check"></i><b>9.1.1</b> Install <code>workflow</code> package</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="r-script-templates.html"><a href="r-script-templates.html#data-preparation-1"><i class="fa fa-check"></i><b>9.2</b> Data Preparation</a><ul>
<li class="chapter" data-level="9.2.1" data-path="r-script-templates.html"><a href="r-script-templates.html#messy-to-tidy-script"><i class="fa fa-check"></i><b>9.2.1</b> messy-to-tidy script</a></li>
<li class="chapter" data-level="9.2.2" data-path="r-script-templates.html"><a href="r-script-templates.html#masterscript-data-preparation"><i class="fa fa-check"></i><b>9.2.2</b> masterscript: Data Preparation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="r-script-templates.html"><a href="r-script-templates.html#data-analysis-1"><i class="fa fa-check"></i><b>9.3</b> Data Analysis</a><ul>
<li class="chapter" data-level="9.3.1" data-path="r-script-templates.html"><a href="r-script-templates.html#clean-and-score-script"><i class="fa fa-check"></i><b>9.3.1</b> clean and score script</a></li>
<li class="chapter" data-level="9.3.2" data-path="r-script-templates.html"><a href="r-script-templates.html#merge-script"><i class="fa fa-check"></i><b>9.3.2</b> merge script</a></li>
<li class="chapter" data-level="9.3.3" data-path="r-script-templates.html"><a href="r-script-templates.html#masterscript-data-analysis"><i class="fa fa-check"></i><b>9.3.3</b> masterscript: Data Analysis</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Data Preparation</b></span></li>
<li class="chapter" data-level="" data-path="data-preparation-overview.html"><a href="data-preparation-overview.html"><i class="fa fa-check"></i>Data Preparation: Overview</a><ul>
<li class="chapter" data-level="9.4" data-path="data-preparation-overview.html"><a href="data-preparation-overview.html#data-collection-repository"><i class="fa fa-check"></i><b>9.4</b> Data Collection Repository</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="example-data-flanker-task.html"><a href="example-data-flanker-task.html"><i class="fa fa-check"></i>Example Data: Flanker Task</a></li>
<li class="chapter" data-level="10" data-path="organize-raw-files.html"><a href="organize-raw-files.html"><i class="fa fa-check"></i><b>10</b> Organize Raw Files</a></li>
<li class="chapter" data-level="11" data-path="merge-individual-subject-files.html"><a href="merge-individual-subject-files.html"><i class="fa fa-check"></i><b>11</b> Merge Individual Subject Files</a><ul>
<li class="chapter" data-level="11.1" data-path="merge-individual-subject-files.html"><a href="merge-individual-subject-files.html#files_bind"><i class="fa fa-check"></i><b>11.1</b> <code>files_bind()</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html"><i class="fa fa-check"></i><b>12</b> Messy to Tidy: 0_task_raw.R</a><ul>
<li class="chapter" data-level="12.1" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#setup-1"><i class="fa fa-check"></i><b>12.1</b> Setup</a></li>
<li class="chapter" data-level="12.2" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#import-1"><i class="fa fa-check"></i><b>12.2</b> Import</a></li>
<li class="chapter" data-level="12.3" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#tidy-raw-data"><i class="fa fa-check"></i><b>12.3</b> Tidy raw data</a><ul>
<li class="chapter" data-level="12.3.1" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#filter-1"><i class="fa fa-check"></i><b>12.3.1</b> Filter</a></li>
<li class="chapter" data-level="12.3.2" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#rename-columns"><i class="fa fa-check"></i><b>12.3.2</b> Rename Columns</a></li>
<li class="chapter" data-level="12.3.3" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#change-values"><i class="fa fa-check"></i><b>12.3.3</b> Change Values</a></li>
<li class="chapter" data-level="12.3.4" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#select-columns"><i class="fa fa-check"></i><b>12.3.4</b> Select Columns</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#output"><i class="fa fa-check"></i><b>12.4</b> Output</a></li>
<li class="chapter" data-level="12.5" data-path="messy-to-tidy-0-task-raw-r.html"><a href="messy-to-tidy-0-task-raw-r.html#masterscript"><i class="fa fa-check"></i><b>12.5</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html"><i class="fa fa-check"></i><b>13</b> Complex Span Tasks</a><ul>
<li class="chapter" data-level="13.1" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html#operation-span"><i class="fa fa-check"></i><b>13.1</b> Operation Span</a></li>
<li class="chapter" data-level="13.2" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html#symmetry-span"><i class="fa fa-check"></i><b>13.2</b> Symmetry Span</a></li>
<li class="chapter" data-level="13.3" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html#rotation-span"><i class="fa fa-check"></i><b>13.3</b> Rotation Span</a></li>
<li class="chapter" data-level="13.4" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html#example-symmetry-span"><i class="fa fa-check"></i><b>13.4</b> Example: Symmetry Span</a></li>
<li class="chapter" data-level="13.5" data-path="complex-span-tasks.html"><a href="complex-span-tasks.html#tidy-file"><i class="fa fa-check"></i><b>13.5</b> Tidy File</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-preparation-summary.html"><a href="data-preparation-summary.html"><i class="fa fa-check"></i>Data Preparation: Summary</a></li>
<li class="part"><span><b>V Cleaning and Scoring Data</b></span></li>
<li class="chapter" data-level="" data-path="cleaning-and-scoring-data-overview.html"><a href="cleaning-and-scoring-data-overview.html"><i class="fa fa-check"></i>Cleaning and Scoring Data: Overview</a><ul>
<li class="chapter" data-level="13.6" data-path="cleaning-and-scoring-data-overview.html"><a href="cleaning-and-scoring-data-overview.html#data-analysis-repository"><i class="fa fa-check"></i><b>13.6</b> Data Analysis Repository</a></li>
<li class="chapter" data-level="13.7" data-path="cleaning-and-scoring-data-overview.html"><a href="cleaning-and-scoring-data-overview.html#copy-tidy-raw-data"><i class="fa fa-check"></i><b>13.7</b> Copy tidy raw data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="example-data-flanker.html"><a href="example-data-flanker.html"><i class="fa fa-check"></i>Example Data: Flanker</a></li>
<li class="chapter" data-level="14" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html"><i class="fa fa-check"></i><b>14</b> Tidy to Scored: 1_task_score.R</a><ul>
<li class="chapter" data-level="14.1" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#setup-2"><i class="fa fa-check"></i><b>14.1</b> Setup</a><ul>
<li class="chapter" data-level="14.1.1" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#set-data-cleaning-parameters"><i class="fa fa-check"></i><b>14.1.1</b> Set Data Cleaning Parameters</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#data-cleaning-and-scoring"><i class="fa fa-check"></i><b>14.2</b> Data Cleaning and Scoring</a><ul>
<li class="chapter" data-level="14.2.1" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#what-is-the-dependent-variable"><i class="fa fa-check"></i><b>14.2.1</b> What is the dependent variable?</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#trimming-1"><i class="fa fa-check"></i><b>14.3</b> Trimming</a></li>
<li class="chapter" data-level="14.4" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#calculate-flankereffect"><i class="fa fa-check"></i><b>14.4</b> Calculate FlankerEffect</a></li>
<li class="chapter" data-level="14.5" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#remove-subjects"><i class="fa fa-check"></i><b>14.5</b> Remove Subjects</a></li>
<li class="chapter" data-level="14.6" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#calculate-binned-scores"><i class="fa fa-check"></i><b>14.6</b> Calculate Binned Scores</a></li>
<li class="chapter" data-level="14.7" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#merge"><i class="fa fa-check"></i><b>14.7</b> Merge</a></li>
<li class="chapter" data-level="14.8" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#output-1"><i class="fa fa-check"></i><b>14.8</b> Output</a></li>
<li class="chapter" data-level="14.9" data-path="tidy-to-scored-1-task-score-r.html"><a href="tidy-to-scored-1-task-score-r.html#masterscript-1"><i class="fa fa-check"></i><b>14.9</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html"><i class="fa fa-check"></i><b>15</b> Merge: Create A Final Data File</a><ul>
<li class="chapter" data-level="15.1" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#setup-3"><i class="fa fa-check"></i><b>15.1</b> Setup</a></li>
<li class="chapter" data-level="15.2" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#merge-1"><i class="fa fa-check"></i><b>15.2</b> Merge</a></li>
<li class="chapter" data-level="15.3" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#select-and-trim"><i class="fa fa-check"></i><b>15.3</b> Select and Trim</a></li>
<li class="chapter" data-level="15.4" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#output-2"><i class="fa fa-check"></i><b>15.4</b> Output</a></li>
<li class="chapter" data-level="15.5" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#masterscript-2"><i class="fa fa-check"></i><b>15.5</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cleaning-and-scoring-data-summary.html"><a href="cleaning-and-scoring-data-summary.html"><i class="fa fa-check"></i>Cleaning and Scoring Data Summary</a></li>
<li class="part"><span><b>VI Data Visualization</b></span></li>
<li class="chapter" data-level="" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html"><i class="fa fa-check"></i>Data Visualization: Overview</a><ul>
<li class="chapter" data-level="15.6" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html#r-markdown"><i class="fa fa-check"></i><b>15.6</b> R Markdown</a><ul>
<li class="chapter" data-level="15.6.1" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html#what-is-an-r-markdown-file"><i class="fa fa-check"></i><b>15.6.1</b> What is an R Markdown File?</a></li>
<li class="chapter" data-level="15.6.2" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html#yaml-header"><i class="fa fa-check"></i><b>15.6.2</b> YAML header</a></li>
<li class="chapter" data-level="15.6.3" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html#r-code-chunks"><i class="fa fa-check"></i><b>15.6.3</b> R code chunks</a></li>
<li class="chapter" data-level="15.6.4" data-path="data-visualization-overview.html"><a href="data-visualization-overview.html#formatted-text"><i class="fa fa-check"></i><b>15.6.4</b> Formatted text</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html"><i class="fa fa-check"></i><b>16</b> Fundamentals of Data Visualization</a><ul>
<li class="chapter" data-level="16.1" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>16.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="16.2" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#plotting-functions-in-r"><i class="fa fa-check"></i><b>16.2</b> Plotting Functions in R</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html"><i class="fa fa-check"></i><b>17</b> Introduction to ggplot2</a><ul>
<li class="chapter" data-level="17.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#grammar-of-graphics-1"><i class="fa fa-check"></i><b>17.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="17.2" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#data-layer"><i class="fa fa-check"></i><b>17.2</b> Data layer</a></li>
<li class="chapter" data-level="17.3" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#aesthetic-layer"><i class="fa fa-check"></i><b>17.3</b> Aesthetic Layer</a></li>
<li class="chapter" data-level="17.4" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#geometries-layer"><i class="fa fa-check"></i><b>17.4</b> Geometries Layer</a></li>
<li class="chapter" data-level="17.5" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#facets-layer"><i class="fa fa-check"></i><b>17.5</b> Facets Layer</a></li>
<li class="chapter" data-level="17.6" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#statistics-layer"><i class="fa fa-check"></i><b>17.6</b> Statistics Layer</a></li>
<li class="chapter" data-level="17.7" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>17.7</b> Coordinates Layer</a></li>
<li class="chapter" data-level="17.8" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#themes-layer"><i class="fa fa-check"></i><b>17.8</b> Themes Layer</a><ul>
<li class="chapter" data-level="17.8.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#built-in-themes"><i class="fa fa-check"></i><b>17.8.1</b> Built-in Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>18</b> Scatterplots</a><ul>
<li class="chapter" data-level="18.1" data-path="scatterplots.html"><a href="scatterplots.html#scatterplots-1"><i class="fa fa-check"></i><b>18.1</b> Scatterplots</a><ul>
<li class="chapter" data-level="18.1.1" data-path="scatterplots.html"><a href="scatterplots.html#adding-other-geoms"><i class="fa fa-check"></i><b>18.1.1</b> Adding other geoms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="plotting-means.html"><a href="plotting-means.html"><i class="fa fa-check"></i><b>19</b> Plotting Means</a><ul>
<li class="chapter" data-level="19.1" data-path="plotting-means.html"><a href="plotting-means.html#bar-graphs"><i class="fa fa-check"></i><b>19.1</b> Bar Graphs</a><ul>
<li class="chapter" data-level="19.1.1" data-path="plotting-means.html"><a href="plotting-means.html#multidimensional-bar-plot"><i class="fa fa-check"></i><b>19.1.1</b> Multidimensional Bar Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="univariate-plots.html"><a href="univariate-plots.html"><i class="fa fa-check"></i><b>20</b> Univariate Plots</a></li>
<li class="chapter" data-level="21" data-path="sjplot.html"><a href="sjplot.html"><i class="fa fa-check"></i><b>21</b> <code>sjPlot</code></a></li>
<li class="chapter" data-level="22" data-path="custom-tables.html"><a href="custom-tables.html"><i class="fa fa-check"></i><b>22</b> Custom Tables</a></li>
<li class="part"><span><b>VII Statistical Analysis</b></span></li>
<li class="chapter" data-level="" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html"><i class="fa fa-check"></i>Statistical Analysis: Overview</a><ul>
<li class="chapter" data-level="22.1" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html#r-markdown-1"><i class="fa fa-check"></i><b>22.1</b> R Markdown</a><ul>
<li class="chapter" data-level="22.1.1" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html#what-is-an-r-markdown-file-1"><i class="fa fa-check"></i><b>22.1.1</b> What is an R Markdown File?</a></li>
<li class="chapter" data-level="22.1.2" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html#yaml-header-1"><i class="fa fa-check"></i><b>22.1.2</b> YAML header</a></li>
<li class="chapter" data-level="22.1.3" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html#r-code-chunks-1"><i class="fa fa-check"></i><b>22.1.3</b> R code chunks</a></li>
<li class="chapter" data-level="22.1.4" data-path="statistical-analysis-overview.html"><a href="statistical-analysis-overview.html#formatted-text-1"><i class="fa fa-check"></i><b>22.1.4</b> Formatted text</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="statistics-in-r.html"><a href="statistics-in-r.html"><i class="fa fa-check"></i><b>23</b> Statistics in R</a></li>
<li class="divider"></li>
<li><a href="http://englelab.gatech.edu/jason">Jason Tsukahara</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EngleLab: UseR Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidy-to-scored-1_task_score.r" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Tidy to Scored: 1_task_score.R</h1>
<p><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"></p>
<p>In this Chapter you will go over an example of how to write an R Script for <strong>converting <em>tidy</em> raw data files to scored and cleaned data files</strong>.</p>
<div id="setup-2" class="section level2">
<h2><span class="header-section-number">14.1</span> Setup</h2>
<p>You should have created your <strong>Data Analysis</strong> repository and copied over the example Flanker data set. If not go back to <strong>Data Cleaning and Scoring: Overview</strong> and <strong>Example Data: Flanker</strong>.</p>
<p>If you have not done so already, open RStudio by opening the <em>UseRGuide_DataAnalysis.Rproj</em> R Project file.</p>
<p>In the folder <strong>R Scripts/templates</strong> open the file <strong>1_taskname_score.R</strong> and save it as <strong>1_flanker_score.R</strong> in the <strong>R Scripts</strong> folder.</p>
<p>If you do not see the template file <strong>1_taskname_score.R</strong>, you can download it. Just type in the following line of code in the console</p>
<pre class="sourceCode r"><code class="sourceCode r">workflow<span class="op">::</span><span class="kw">template</span>(<span class="dt">scorescript =</span> <span class="ot">TRUE</span>)</code></pre>
<hr />
<p>In the R script file take note of the import and output directories.</p>
<p>Change <code>task &lt;- &quot;taskname&quot;</code> to <code>task &lt;- &quot;Flanker&quot;</code></p>
<p>Just by looking at the Setup section of the script you should be able to tell that this script will import the file Data Files/Raw Data/<strong>Flanker_raw.csv</strong> and output the file Data Files/Scored Data/<strong>Flanker_Scores.csv</strong>.</p>
<hr />
<div id="set-data-cleaning-parameters" class="section level3">
<h3><span class="header-section-number">14.1.1</span> Set Data Cleaning Parameters</h3>
<p>In the example we are about to go through we will implement the following data cleaning procedures when calculating the <code>FlankerEffect</code>. They will be implemented in the following order</p>
<ol style="list-style-type: decimal">
<li><p><strong>rt.min</strong>: Set RTs less than 200ms to missing (<code>NA</code>) and Accuracy to incorrect (<code>0</code>).</p></li>
<li><p><strong>rt.trim</strong>: Trim RTs. Replace Outlier RTs that are above or below <strong>3.5 SDs</strong> of the mean, with values exactly at <strong>3.5 SDs</strong> above or below the mean. This is evaluated for each Subject by each condition seprately.</p></li>
<li><p><strong>acc.criteria</strong>: Finally remove subjects that performed less than <strong>3.5 standard deviations</strong> below the mean accuracy on any <code>Condition</code> (congruent or incongruent).</p></li>
</ol>
<p>Let’s add these data cleaning parameters to the <em>Setup</em> block</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Set Data Cleaning Params </span>
rt.min &lt;-<span class="st"> </span><span class="dv">200</span>
rt.trim &lt;-<span class="st"> </span><span class="fl">3.5</span>
acc.criteria &lt;-<span class="st"> </span><span class="fl">-3.5</span>
<span class="co">#############</span></code></pre>
<p>You will now be able to use these objects <code>rt.min</code>, <code>rt.trim</code>, and <code>acc.criteria</code> when writing the code to actually do the data cleaning. This is useful because if you want to change these parameters you can do it right here in the <em>Setup</em> block rather than searching through all your code and figure out where you need to change the values.</p>
<p>Again, just from the Setup section you can get an idea of what sort of data cleaning criteria we will use.</p>
<p><strong>Notice how you do not need to change anything in the <em>Import</em> section.</strong></p>
</div>
</div>
<div id="data-cleaning-and-scoring" class="section level2">
<h2><span class="header-section-number">14.2</span> Data Cleaning and Scoring</h2>
<div id="what-is-the-dependent-variable" class="section level3">
<h3><span class="header-section-number">14.2.1</span> What is the dependent variable?</h3>
<p>The next block is where we do the actual <strong>data cleaning and task scoring</strong>.</p>
<p>This step is more complicated and often times requires some forethought. But we don’t always have the best forethought so you will likely re-write previous lines of code.</p>
<p>One thing you must think about before writing the script for this stage is the statistical analyses you eventually plan on conducting. The type of statistical analyses you plan on conducting will determine the final dataframe you want to end up at in this stage of data analysis.</p>
<p>What are the final dependent variables (or task scores) you want to calaculate? In the Flanker task there are several task scores we might want to calculate (in a regression context).</p>
<ul>
<li><p><strong>FlankerEffect on RT</strong>: Mean reaction time difference between incongruent and congruent trials</p></li>
<li><p><strong>FlankerEffect on Accuracy</strong>: Mean accuracy difference between incongruent and congruent trials</p></li>
<li><p><strong>Flanker Binned Scores</strong>: A scoring method to combine accuracy and reaction time (an alternative to difference scores)</p></li>
</ul>
<hr />
</div>
</div>
<div id="trimming-1" class="section level2">
<h2><span class="header-section-number">14.3</span> Trimming</h2>
<p>First we need to get rid of <strong>practice trials</strong> / keep only <strong>real trials</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Data Cleaning and Scoring ####</span>
<span class="co">## Trimming </span>
data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>)
<span class="co">#################################</span></code></pre>
<p>Then,</p>
<ol style="list-style-type: decimal">
<li>set RTs less than 200ms to missing (<code>NA</code>) and Accuracy to <code>0</code> using <code>mutate()</code> and <code>ifelse()</code></li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Data Cleaning and Scoring ####</span>
<span class="co">## Trimming </span>
data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="ot">NA</span>, RT),
         <span class="dt">Accuracy =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="dv">0</span>, Accuracy))
<span class="co">#################################</span></code></pre>
<p>And,</p>
<ol start="2" style="list-style-type: decimal">
<li>Trim RTs, grouped by <strong>Subject</strong> and <strong>Condition</strong> using the <code>trim()</code> function from my <code>datawrangling</code> package.</li>
</ol>
<p><code>trim()</code> is an easy way to trim values on a variable using a certain <em>z-score</em> cutoff. The main arguments to pass onto <code>trim()</code> are:</p>
<ul>
<li><p><strong>variables</strong>: The column name that contains the values you want to trim</p></li>
<li><p><strong>cutoff</strong>: What <em>z-score</em> cutoff value you want to use</p></li>
<li><p><strong>replace</strong>: How you want to replace the outlier values. Options are, <code>&quot;mean&quot;</code>, <code>&quot;cutoff&quot;</code>, or <code>&quot;NA</code></p></li>
</ul>
<p>You can use <code>group_by()</code> with <code>trim()</code> to trim independently for each <code>Condition</code> (congruent, incongruent, neutral). Always <code>ungroup()</code> afterwards.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Data Cleaning and Scoring ####</span>
<span class="co">## Trimming </span>
data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="ot">NA</span>, RT),
         <span class="dt">Accuracy =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="dv">0</span>, Accuracy)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">trim</span>(<span class="dt">variables =</span> <span class="st">&quot;RT&quot;</span>, <span class="dt">cutoff =</span> rt.trim, <span class="dt">replace =</span> <span class="st">&quot;cutoff&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()
<span class="co">#################################</span></code></pre>
<p>This will trim any RTs that are 3.5 SDs above or below the mean grouped by Subject and Condition, and then replace the outlier score with 3.5 SDs above or below the mean.</p>
<p>We will implement the third data cleaning procedure later.</p>
</div>
<div id="calculate-flankereffect" class="section level2">
<h2><span class="header-section-number">14.4</span> Calculate FlankerEffect</h2>
<p>What we want to do is calculate both the <code>FlankerEffect</code> and <code>FlankerBinned</code> Scores. These are separate scoring procedures. The general approach we will take is to create two separate dataframes for each procedure, based off the <code>data_trim</code> dataframe. Then we will <code>merge</code> the two dataframes back into one.</p>
<p>First calculate the <code>FlankerEffect</code>. We want to calcualte the <code>FlankerEffect</code> on <code>RT</code> using only <code>Accurate</code> trials. Since we also want to calculate the <code>FlankerEffect</code> on <code>Accuracy</code> we cannot just use a <code>filter()</code>. Instead we should <code>mutate()</code> the values in <code>RT</code> to be <code>NA</code> when <code>Accuracy</code> is <code>0</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Flanker Effect</span>
data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT))</code></pre>
<p>Notice how we are now creating a new dataframe called <code>data_flanker</code>.</p>
<p>Next step is to calculate mean <code>RT</code> and mean <code>Accuracy</code> separately for congruent, incongruent, and neutral trials.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Flanker Effect</span>
data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">Accuracy.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre>
<p>Because we used <code>group_by(Subject, Condition)</code>, <code>summarise()</code> will calculate the mean <code>RT</code> and mean <code>Accuracy</code> separately for each <code>Subject</code> and each <code>Condition</code>.</p>
<p><strong>Always be sure to <code>ungroup()</code> afterwards.</strong></p>
<p>View the data frame. In the console type</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(data_flanker)</code></pre>
<p>Now rather than having one row per trial, <code>group_by()</code> and <code>summarise()</code> has aggregated the data down to <code>Subject</code> x <code>Condition</code>. What we want to do is calculate the difference between incongruent and congruent conditions on <code>RT.mean</code> and <code>Accuracy.mean</code>. However, congruent, incongruent, and neutral conditions are on separate rows.</p>
<p>What we need to do is <code>reshape</code> the data so that there is a column for each <code>Condition</code> on <code>RT.mean</code> and <code>Accuracy.mean</code>. Our columns should be</p>
<ul>
<li><p><code>congruent_RT.mean</code></p></li>
<li><p><code>incongruent_RT.mean</code></p></li>
<li><p><code>neutral_RT.mean</code></p></li>
<li><p><code>congruent_Accuracy.mean</code></p></li>
<li><p><code>incongruent_Accuracy.mean</code></p></li>
<li><p><code>neutral_Accuracy.mean</code></p></li>
</ul>
<p>Typically, to <code>reshape</code> a data frame we would use the <code>gather()</code> and <code>spread()</code> functions from the <code>tidyr</code> package. However, these do not allow reshaping on more than one <code>value</code> column. We have two <code>value</code> columns, <code>RT.mean</code> and <code>Accuracy.mean</code>.</p>
<p>Luckily I have created a function that can allow us to do this, <code>reshape_spread()</code> from my <code>datawrangling</code> package. The main arguments you need to specify are:</p>
<ul>
<li><p><strong>variables</strong>: The column name that contains the key variables to <code>spread</code> on</p></li>
<li><p><strong>values</strong>: The column name(s) that hold the values to be used</p></li>
<li><p><strong>id</strong>: Which columns should be preserved (i.e. <code>Subject</code>)</p></li>
</ul>
<p>So we can add something like this</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Flanker Effect</span>
data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">ACC.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">reshape_spread</span>(<span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>,
                 <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;ACC.mean&quot;</span>))</code></pre>
<p>Now <code>View()</code> the data frame. There should now be only ONE row per <code>Subject</code>. We can now just use <code>mutate()</code> to calculate the difference between these columns to get the <code>FlankerEffect</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Flanker Effect</span>
data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">Accuracy.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">reshape_spread</span>(<span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>,
                 <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;Accuracy.mean&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">FlankerEffect_RT =</span> incongruent_RT.mean <span class="op">-</span><span class="st"> </span>congruent_RT.mean,
         <span class="dt">FlankerEffect_ACC =</span> incongruent_Accuracy.mean <span class="op">-</span><span class="st"> </span>congruent_Accuracy.mean)</code></pre>
</div>
<div id="remove-subjects" class="section level2">
<h2><span class="header-section-number">14.5</span> Remove Subjects</h2>
<p>Next, we should implement the third data cleaning procedure listed above.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>acc.criteria</strong>: Remove subjects that performed less than <strong>3.5 standard deviations</strong> below the mean accuracy on any <code>Condition</code> (congruent, incongruent, or neutral).</li>
</ol>
<p>It is convenient to do it now because we have a column with mean Accuracy for congruent and incongruent trials. We also want to do this before applying the <code>binning</code> procedure.</p>
<p>The approach I like to take with entirely removing subjects is to keep a record of those subjects in a data file somewhere. To do this we will 1) create a new data frame of subjects that will be removed and then 2) use a function I created, <code>remove_save()</code> from the <code>datawrangling</code> package. This function is a short hand way of doing two things at once.</p>
<ol style="list-style-type: decimal">
<li><p>Removing the subjects from the full data file</p></li>
<li><p>Saving the removed subjects to a specified directory.</p></li>
</ol>
<p>The criteria we are removing subjects based on are those who performed 3.5 SDs below the mean. So we first need to calculate a column of z-scores (on SD units), then filter those who are below 3.5 z-scores.</p>
<p>We can use <code>datawrangling::center()</code> to standardize the variables.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Remove Subjects</span>
data_remove &lt;-<span class="st"> </span>data_flanker <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">center</span>(<span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;congruent_Accuracy.mean&quot;</span>, 
                       <span class="st">&quot;incongruent_Accuracy.mean&quot;</span>, 
                       <span class="st">&quot;neutral_Accuracy.mean&quot;</span>), 
         <span class="dt">standardize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(congruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span>
<span class="st">           </span>incongruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span><span class="st"> </span>
<span class="st">           </span>neutral_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria)</code></pre>
<p>Then use <code>remove_save()</code>. The main arguments to specify are:</p>
<ul>
<li><p><strong>x</strong>: the data frame that contains ALL subjects</p></li>
<li><p><strong>remove</strong>: the data frame that contains subjects to be removed</p></li>
<li><p><strong>output.dir</strong>: directory to output file with removed subjects to</p></li>
<li><p><strong>output.file</strong>: name of file with removed subjects</p></li>
</ul>
<p>I put the removed subjects in a folder called <em>“removed”</em> and named the file <em>“Flanker_removed.csv”</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Remove Subjects</span>
data_remove &lt;-<span class="st"> </span>data_flanker <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">center</span>(<span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;congruent_Accuracy.mean&quot;</span>, 
                       <span class="st">&quot;incongruent_Accuracy.mean&quot;</span>, 
                       <span class="st">&quot;neutral_Accuracy.mean&quot;</span>), 
         <span class="dt">standardize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(congruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span>
<span class="st">           </span>incongruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span><span class="st"> </span>
<span class="st">           </span>neutral_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria)

data_flanker &lt;-<span class="st"> </span><span class="kw">remove_save</span>(data_flanker, data_remove, 
                            <span class="dt">output.dir =</span> <span class="kw">here</span>(output.dir, <span class="st">&quot;removed&quot;</span>), 
                            <span class="dt">output.file =</span> <span class="kw">paste</span>(task, <span class="st">&quot;removed.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>))</code></pre>
<p>If any subjects were removed you should now see a folder called <strong>removed</strong> in the <strong>Scored Data</strong> folder with a file called “Flanker_removed.csv”.</p>
<p>In the <strong>Files</strong> window of RStudio, navigate to Data Files/Scored Data/removed and click on <strong>Flanker_removed.csv</strong> -&gt; Import DataSet… -&gt; Update (top right) -&gt; Import.</p>
<p>View the dataframe. Notice how these Subjects had poor performance on at least one of the conditions. These subjects have been removed from further analysis. This file is just a track record of who was removed and why.</p>
</div>
<div id="calculate-binned-scores" class="section level2">
<h2><span class="header-section-number">14.6</span> Calculate Binned Scores</h2>
<p>Great! We have now calculated FlankerEffects scores and performed the data cleaning procedures. Now we need to calculate Binned scores. The <code>data_flanker</code> data frame is no longer in a format that we can calculate bin scores. We need to use the trimmed data frame that has trial level data.</p>
<p>We should remove the poor performing subjects and Missing RTs. <strong>This step is actually really important for the binning procedure because bin scores are relative to other subjects in the data.</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Binned scores</span>
data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject))</code></pre>
<p>This is stating, keep only Trials without missing values on <code>RT</code> AND Subjects that are NOT (<code>!</code>) in (<code>%in%</code>) <code>data_remove</code>.</p>
<p>We also need to remove neutral trials to calculate bin scores. Bin scores are based on comparing one condition to a baseline condition. In this case we want to compare the incongruent condition to the baseline congruent condition. So we need to get rid of neutral conditions.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Binned scores</span>
data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), Condition <span class="op">!=</span><span class="st"> &quot;neutral&quot;</span>,
         <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject))</code></pre>
<p>And finally calculate bin scores using <code>bin_score()</code> from the <code>englelab</code> package. The main arguments to specify are:</p>
<ul>
<li><p><strong>x</strong>: The data frame</p></li>
<li><p><strong>rt.col</strong>: Column name that contains the reaction time data. <em>Default = “RT”</em></p></li>
<li><p><strong>accuracy.col</strong>: Column name that contains the accuracy data. <em>Default = “Accuracy”</em></p></li>
<li><p><strong>condition.col</strong>: Column name that contains the trial condition type. <em>Default = “Condition”</em></p></li>
<li><p><strong>baseline.condition</strong>: The values that specify the baseline condition</p></li>
<li><p><strong>type</strong>: How should Bin trials be aggregated, “sum” or “mean”. <em>Default = “mean”</em></p></li>
<li><p><strong>id</strong>: Column name that contains subject identifiers. <em>Default = “Subject”</em></p></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Calculate Binned scores</span>
data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), Condition <span class="op">!=</span><span class="st"> &quot;neutral&quot;</span>,
         <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">bin_score</span>(<span class="dt">baseline.condition =</span> <span class="st">&quot;congruent&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mean&quot;</span>,) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">FlankerBin =</span> <span class="st">&quot;BinScore&quot;</span>)</code></pre>
<p>Awesome! Now we have two data frames, one, <code>data_flanker</code>, with FlankerEffect scores and another, <code>data_binned</code> with FlankerBin scores. They both have one row per subject.</p>
</div>
<div id="merge" class="section level2">
<h2><span class="header-section-number">14.7</span> Merge</h2>
<p>Now we can merge these two data frames together using the <code>merge()</code> function from base R.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Merge</span>
data_flanker &lt;-<span class="st"> </span><span class="kw">merge</span>(data_flanker, data_binned, <span class="dt">by =</span> <span class="st">&quot;Subject&quot;</span>, <span class="dt">all =</span> <span class="ot">TRUE</span>)</code></pre>
<p>Now view the <code>data_flanker</code>. It should be one row per subject and have columns for <code>FlanekrEffect_RT</code>, <code>FlankerEffect_ACC</code>, and <code>FlankerBin</code>.</p>
</div>
<div id="output-1" class="section level2">
<h2><span class="header-section-number">14.8</span> Output</h2>
<p>You do not need to change anything in the output block</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Output ####</span>
<span class="kw">write_csv</span>(data_flanker, <span class="kw">here</span>(output.dir, output.file))
<span class="co">##############</span></code></pre>
<p>Great! You have written an R script for Data Cleaning and Scoring.</p>
<hr />
</div>
<div id="masterscript-1" class="section level2">
<h2><span class="header-section-number">14.9</span> Masterscript</h2>
<p>Finally, you should add a line of code to the masterscript that <em>sources</em> the file <strong>1_flanker_score.R</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="kw">here</span>(<span class="st">&quot;R Scripts&quot;</span>, <span class="st">&quot;1_flanker_score.R&quot;</span>), <span class="dt">echo =</span> <span class="ot">TRUE</span>)</code></pre>
<hr />
<hr />
<p><strong>Woo! You should feel accomplished. Okay one more quick step before the best part.</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="example-data-flanker.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="merge-create-a-final-data-file.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper", "github"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
