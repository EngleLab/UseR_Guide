<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Tutorial and User Guide for the EngleLab</title>
  <meta name="description" content="This is an R Tutorial and User Guide for the EngleLab">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Tutorial and User Guide for the EngleLab" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an R Tutorial and User Guide for the EngleLab" />
  <meta name="github-repo" content="EngleLab" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Tutorial and User Guide for the EngleLab" />
  
  <meta name="twitter:description" content="This is an R Tutorial and User Guide for the EngleLab" />
  

<meta name="author" content="Jason Tsukahara">


<meta name="date" content="2019-05-31">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="messy-to-tidy.html">
<link rel="next" href="merge-create-a-final-data-file.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-guide"><i class="fa fa-check"></i>How to use this guide</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#workflow"><i class="fa fa-check"></i>Workflow</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i>Overview</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started in R</b></span></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation</a><ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#the-r-studio-environemnt"><i class="fa fa-check"></i><b>1.3</b> The R Studio Environemnt</a></li>
<li class="chapter" data-level="1.4" data-path="installation.html"><a href="installation.html#r-studio-settings"><i class="fa fa-check"></i><b>1.4</b> R Studio Settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#creating-r-objects"><i class="fa fa-check"></i><b>2.1</b> Creating R objects</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-r.html"><a href="basic-r.html#classes"><i class="fa fa-check"></i><b>2.1.1</b> Classes</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>2.1.2</b> Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-r.html"><a href="basic-r.html#factors"><i class="fa fa-check"></i><b>2.1.3</b> Factors</a></li>
<li class="chapter" data-level="2.1.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>2.1.4</b> Lists</a></li>
<li class="chapter" data-level="2.1.5" data-path="basic-r.html"><a href="basic-r.html#data-frames"><i class="fa fa-check"></i><b>2.1.5</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#ifthen-statements"><i class="fa fa-check"></i><b>2.2</b> If…then Statements</a></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basic-r.html"><a href="basic-r.html#installing-and-loading-r-packages"><i class="fa fa-check"></i><b>2.3.1</b> Installing and Loading R Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#more-r-basic-resources"><i class="fa fa-check"></i><b>2.4</b> More R Basic Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>3</b> Intermediate R</a><ul>
<li class="chapter" data-level="3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loops"><i class="fa fa-check"></i><b>3.1</b> For Loops</a></li>
<li class="chapter" data-level="3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#creating-your-own-functions"><i class="fa fa-check"></i><b>3.2.1</b> Creating Your Own Functions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Working with Data</b></span></li>
<li class="chapter" data-level="4" data-path="the-tidyverse.html"><a href="the-tidyverse.html"><i class="fa fa-check"></i><b>4</b> The tidyverse</a></li>
<li class="chapter" data-level="5" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html"><i class="fa fa-check"></i><b>5</b> Importing and Outputing Data</a><ul>
<li class="chapter" data-level="5.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#csv"><i class="fa fa-check"></i><b>5.1</b> CSV</a><ul>
<li class="chapter" data-level="5.1.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.csv"><i class="fa fa-check"></i><b>5.1.1</b> Import <code>.csv</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.csv"><i class="fa fa-check"></i><b>5.1.2</b> Output <code>.csv</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#tab-delimited"><i class="fa fa-check"></i><b>5.2</b> Tab-Delimited</a><ul>
<li class="chapter" data-level="5.2.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.txt"><i class="fa fa-check"></i><b>5.2.1</b> Import <code>.txt</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.txt"><i class="fa fa-check"></i><b>5.2.2</b> Output <code>.txt</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#spss"><i class="fa fa-check"></i><b>5.3</b> SPSS</a><ul>
<li class="chapter" data-level="5.3.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.sav"><i class="fa fa-check"></i><b>5.3.1</b> Import <code>.sav</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.sav"><i class="fa fa-check"></i><b>5.3.2</b> Output <code>.sav</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#rstudio-import-gui"><i class="fa fa-check"></i><b>5.4</b> RStudio Import GUI</a></li>
<li class="chapter" data-level="5.5" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#merging-data-files"><i class="fa fa-check"></i><b>5.5</b> Merging Data Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html"><i class="fa fa-check"></i><b>6</b> Data Manipulation using <code>dplyr</code></a><ul>
<li class="chapter" data-level="6.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#setup"><i class="fa fa-check"></i><b>6.1</b> Setup</a></li>
<li class="chapter" data-level="6.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#import"><i class="fa fa-check"></i><b>6.2</b> Import</a></li>
<li class="chapter" data-level="6.3" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#rename"><i class="fa fa-check"></i><b>6.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="6.4" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#filter"><i class="fa fa-check"></i><b>6.4</b> <code>filter()</code></a></li>
<li class="chapter" data-level="6.5" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#select"><i class="fa fa-check"></i><b>6.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="6.6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#mutate"><i class="fa fa-check"></i><b>6.6</b> <code>mutate()</code></a><ul>
<li class="chapter" data-level="6.6.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#changing-values-in-an-existing-column"><i class="fa fa-check"></i><b>6.6.1</b> Changing values in an existing column</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#creating-a-new-column"><i class="fa fa-check"></i><b>6.6.2</b> Creating a new column</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#group_by"><i class="fa fa-check"></i><b>6.7</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="6.8" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#summarise"><i class="fa fa-check"></i><b>6.8</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="6.9" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#spread"><i class="fa fa-check"></i><b>6.9</b> <code>spread()</code></a></li>
<li class="chapter" data-level="6.10" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#pipe-operator"><i class="fa fa-check"></i><b>6.10</b> Pipe Operator %&gt;%</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html"><i class="fa fa-check"></i><b>7</b> Common Data Manipulations</a><ul>
<li class="chapter" data-level="7.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#descriptive-statistics"><i class="fa fa-check"></i><b>7.1</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="7.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#centering-and-standardizing-variables"><i class="fa fa-check"></i><b>7.2</b> Centering and Standardizing Variables</a></li>
<li class="chapter" data-level="7.3" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#trimming"><i class="fa fa-check"></i><b>7.3</b> Trimming</a></li>
<li class="chapter" data-level="7.4" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#composites"><i class="fa fa-check"></i><b>7.4</b> Composites</a></li>
<li class="chapter" data-level="7.5" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#scale-transformations"><i class="fa fa-check"></i><b>7.5</b> Scale Transformations</a><ul>
<li class="chapter" data-level="7.5.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#log"><i class="fa fa-check"></i><b>7.5.1</b> log</a></li>
<li class="chapter" data-level="7.5.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#polynomial"><i class="fa fa-check"></i><b>7.5.2</b> polynomial</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#custom-transformations"><i class="fa fa-check"></i><b>7.6</b> Custom Transformations</a></li>
</ul></li>
<li class="part"><span><b>III Example: Data Preparation</b></span></li>
<li class="chapter" data-level="8" data-path="example-data-set.html"><a href="example-data-set.html"><i class="fa fa-check"></i><b>8</b> Example Data Set</a><ul>
<li class="chapter" data-level="8.1" data-path="example-data-set.html"><a href="example-data-set.html#initial-setup"><i class="fa fa-check"></i><b>8.1</b> Initial Setup</a><ul>
<li class="chapter" data-level="8.1.1" data-path="example-data-set.html"><a href="example-data-set.html#rstudio-project"><i class="fa fa-check"></i><b>8.1.1</b> RStudio Project</a></li>
<li class="chapter" data-level="8.1.2" data-path="example-data-set.html"><a href="example-data-set.html#directory-organization"><i class="fa fa-check"></i><b>8.1.2</b> Directory Organization</a></li>
<li class="chapter" data-level="8.1.3" data-path="example-data-set.html"><a href="example-data-set.html#r-scripts"><i class="fa fa-check"></i><b>8.1.3</b> R Scripts</a></li>
<li class="chapter" data-level="8.1.4" data-path="example-data-set.html"><a href="example-data-set.html#masterscript"><i class="fa fa-check"></i><b>8.1.4</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="example-data-set.html"><a href="example-data-set.html#example-data-flanker-task"><i class="fa fa-check"></i><b>8.2</b> Example Data: Flanker Task</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html"><i class="fa fa-check"></i><b>9</b> Merging Individual Subject Files</a><ul>
<li class="chapter" data-level="9.1" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html#setup-1"><i class="fa fa-check"></i><b>9.1</b> Setup</a></li>
<li class="chapter" data-level="9.2" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html#files_bind"><i class="fa fa-check"></i><b>9.2</b> <code>files_bind()</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html"><i class="fa fa-check"></i><b>10</b> Messy to Tidy</a><ul>
<li class="chapter" data-level="10.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#setup-2"><i class="fa fa-check"></i><b>10.1</b> Setup</a><ul>
<li class="chapter" data-level="10.1.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#load-packages"><i class="fa fa-check"></i><b>10.1.1</b> Load packages</a></li>
<li class="chapter" data-level="10.1.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#set-importoutput-directories"><i class="fa fa-check"></i><b>10.1.2</b> Set Import/Output Directories</a></li>
<li class="chapter" data-level="10.1.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#set-importoutput-file-names"><i class="fa fa-check"></i><b>10.1.3</b> Set Import/Output File Names</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#import-1"><i class="fa fa-check"></i><b>10.2</b> Import</a></li>
<li class="chapter" data-level="10.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#tidy-raw-data"><i class="fa fa-check"></i><b>10.3</b> Tidy raw data</a><ul>
<li class="chapter" data-level="10.3.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#filter-1"><i class="fa fa-check"></i><b>10.3.1</b> Filter</a></li>
<li class="chapter" data-level="10.3.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#rename-columns"><i class="fa fa-check"></i><b>10.3.2</b> Rename Columns</a></li>
<li class="chapter" data-level="10.3.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#change-values"><i class="fa fa-check"></i><b>10.3.3</b> Change Values</a></li>
<li class="chapter" data-level="10.3.4" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#select-columns"><i class="fa fa-check"></i><b>10.3.4</b> Select Columns</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#output"><i class="fa fa-check"></i><b>10.4</b> Output</a></li>
<li class="chapter" data-level="10.5" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#copy-and-paste"><i class="fa fa-check"></i><b>10.5</b> Copy and Paste</a></li>
<li class="chapter" data-level="10.6" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#masterscript-1"><i class="fa fa-check"></i><b>10.6</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html"><i class="fa fa-check"></i><b>11</b> Data Cleaning and Scoring</a><ul>
<li class="chapter" data-level="11.1" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#setup-3"><i class="fa fa-check"></i><b>11.1</b> Setup</a><ul>
<li class="chapter" data-level="11.1.1" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#data-cleaning-parameters"><i class="fa fa-check"></i><b>11.1.1</b> Data Cleaning Parameters</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#import-2"><i class="fa fa-check"></i><b>11.2</b> Import</a></li>
<li class="chapter" data-level="11.3" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#data-cleaning-and-scoring-1"><i class="fa fa-check"></i><b>11.3</b> Data Cleaning and Scoring</a></li>
<li class="chapter" data-level="11.4" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#trimming-1"><i class="fa fa-check"></i><b>11.4</b> Trimming</a></li>
<li class="chapter" data-level="11.5" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#calculate-flankereffect"><i class="fa fa-check"></i><b>11.5</b> Calculate FlankerEffect</a></li>
<li class="chapter" data-level="11.6" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#remove-subjects"><i class="fa fa-check"></i><b>11.6</b> Remove Subjects</a></li>
<li class="chapter" data-level="11.7" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#calculate-binned-scores"><i class="fa fa-check"></i><b>11.7</b> Calculate Binned Scores</a></li>
<li class="chapter" data-level="11.8" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#merge"><i class="fa fa-check"></i><b>11.8</b> Merge</a></li>
<li class="chapter" data-level="11.9" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#save-data-file"><i class="fa fa-check"></i><b>11.9</b> Save data file</a></li>
<li class="chapter" data-level="11.10" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#masterscript-2"><i class="fa fa-check"></i><b>11.10</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html"><i class="fa fa-check"></i><b>12</b> Merge: Create A Final Data File</a><ul>
<li class="chapter" data-level="12.1" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#setup-4"><i class="fa fa-check"></i><b>12.1</b> Setup</a></li>
<li class="chapter" data-level="12.2" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#merge-1"><i class="fa fa-check"></i><b>12.2</b> Merge</a></li>
<li class="chapter" data-level="12.3" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#select-and-trim"><i class="fa fa-check"></i><b>12.3</b> Select and Trim</a></li>
<li class="chapter" data-level="12.4" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#output-1"><i class="fa fa-check"></i><b>12.4</b> Output</a></li>
<li class="chapter" data-level="12.5" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#masterscript-3"><i class="fa fa-check"></i><b>12.5</b> Masterscript</a></li>
</ul></li>
<li class="part"><span><b>IV Data Science Practices</b></span></li>
<li class="chapter" data-level="13" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>13</b> Reproducibility</a><ul>
<li class="chapter" data-level="13.1" data-path="reproducibility.html"><a href="reproducibility.html#what-is-real"><i class="fa fa-check"></i><b>13.1</b> What is real?</a></li>
<li class="chapter" data-level="13.2" data-path="reproducibility.html"><a href="reproducibility.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>13.2</b> Where does your analysis live?</a><ul>
<li class="chapter" data-level="13.2.1" data-path="reproducibility.html"><a href="reproducibility.html#project-level"><i class="fa fa-check"></i><b>13.2.1</b> Project Level</a></li>
<li class="chapter" data-level="13.2.2" data-path="reproducibility.html"><a href="reproducibility.html#script-level"><i class="fa fa-check"></i><b>13.2.2</b> Script Level</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="reproducibility.html"><a href="reproducibility.html#environment"><i class="fa fa-check"></i><b>13.3</b> Environment</a><ul>
<li class="chapter" data-level="13.3.1" data-path="reproducibility.html"><a href="reproducibility.html#working-directory"><i class="fa fa-check"></i><b>13.3.1</b> Working Directory</a></li>
<li class="chapter" data-level="13.3.2" data-path="reproducibility.html"><a href="reproducibility.html#loaded-packages"><i class="fa fa-check"></i><b>13.3.2</b> Loaded Packages</a></li>
<li class="chapter" data-level="13.3.3" data-path="reproducibility.html"><a href="reproducibility.html#objects"><i class="fa fa-check"></i><b>13.3.3</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="reproducibility.html"><a href="reproducibility.html#folder-organization"><i class="fa fa-check"></i><b>13.4</b> Folder Organization</a></li>
<li class="chapter" data-level="13.5" data-path="reproducibility.html"><a href="reproducibility.html#naming-r-scripts"><i class="fa fa-check"></i><b>13.5</b> Naming R Scripts</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="organization.html"><a href="organization.html"><i class="fa fa-check"></i><b>14</b> Organization</a><ul>
<li class="chapter" data-level="14.1" data-path="organization.html"><a href="organization.html#data-collection"><i class="fa fa-check"></i><b>14.1</b> Data Collection</a></li>
<li class="chapter" data-level="14.2" data-path="organization.html"><a href="organization.html#data-analysis"><i class="fa fa-check"></i><b>14.2</b> Data Analysis</a></li>
<li class="chapter" data-level="14.3" data-path="organization.html"><a href="organization.html#workflow-package"><i class="fa fa-check"></i><b>14.3</b> <code>workflow</code> package</a><ul>
<li class="chapter" data-level="14.3.1" data-path="organization.html"><a href="organization.html#setup-repository-organization"><i class="fa fa-check"></i><b>14.3.1</b> Setup Repository Organization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="r-script-templates.html"><a href="r-script-templates.html"><i class="fa fa-check"></i><b>15</b> R Script Templates</a><ul>
<li class="chapter" data-level="15.1" data-path="r-script-templates.html"><a href="r-script-templates.html#building-a-template-workflow"><i class="fa fa-check"></i><b>15.1</b> Building a Template Workflow</a></li>
<li class="chapter" data-level="15.2" data-path="r-script-templates.html"><a href="r-script-templates.html#englelab-github"><i class="fa fa-check"></i><b>15.2</b> EngleLab GitHub</a></li>
<li class="chapter" data-level="15.3" data-path="r-script-templates.html"><a href="r-script-templates.html#masterscript-template"><i class="fa fa-check"></i><b>15.3</b> Masterscript Template</a><ul>
<li class="chapter" data-level="15.3.1" data-path="r-script-templates.html"><a href="r-script-templates.html#directories"><i class="fa fa-check"></i><b>15.3.1</b> <code>directories</code></a></li>
<li class="chapter" data-level="15.3.2" data-path="r-script-templates.html"><a href="r-script-templates.html#source"><i class="fa fa-check"></i><b>15.3.2</b> <code>source()</code></a></li>
<li class="chapter" data-level="15.3.3" data-path="r-script-templates.html"><a href="r-script-templates.html#render"><i class="fa fa-check"></i><b>15.3.3</b> <code>render()</code></a></li>
<li class="chapter" data-level="15.3.4" data-path="r-script-templates.html"><a href="r-script-templates.html#data-collection-repository"><i class="fa fa-check"></i><b>15.3.4</b> Data Collection Repository</a></li>
<li class="chapter" data-level="15.3.5" data-path="r-script-templates.html"><a href="r-script-templates.html#data-analysis-repository"><i class="fa fa-check"></i><b>15.3.5</b> Data Analysis Repository</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="r-script-templates.html"><a href="r-script-templates.html#messy-to-tidy-template"><i class="fa fa-check"></i><b>15.4</b> <em>Messy</em> to <em>Tidy</em> Template</a></li>
<li class="chapter" data-level="15.5" data-path="r-script-templates.html"><a href="r-script-templates.html#tidy-to-scored-template"><i class="fa fa-check"></i><b>15.5</b> <em>Tidy</em> to <em>Scored</em> Template</a></li>
</ul></li>
<li class="part"><span><b>V Data Ananlysis</b></span></li>
<li class="chapter" data-level="16" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html"><i class="fa fa-check"></i><b>16</b> Introduction to Data Analysis</a><ul>
<li class="chapter" data-level="16.1" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#r-markdown"><i class="fa fa-check"></i><b>16.1</b> R Markdown</a><ul>
<li class="chapter" data-level="16.1.1" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#what-is-an-r-markdown-file"><i class="fa fa-check"></i><b>16.1.1</b> What is an R Markdown File?</a></li>
<li class="chapter" data-level="16.1.2" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#yaml-header"><i class="fa fa-check"></i><b>16.1.2</b> YAML header</a></li>
<li class="chapter" data-level="16.1.3" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#r-code-chunks"><i class="fa fa-check"></i><b>16.1.3</b> R code chunks</a></li>
<li class="chapter" data-level="16.1.4" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#formatted-text"><i class="fa fa-check"></i><b>16.1.4</b> Formatted text</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>– Data Visualization</b></span></li>
<li class="chapter" data-level="17" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html"><i class="fa fa-check"></i><b>17</b> Fundamentals of Data Visualization</a><ul>
<li class="chapter" data-level="17.1" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>17.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="17.2" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#plotting-functions-in-r"><i class="fa fa-check"></i><b>17.2</b> Plotting Functions in R</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html"><i class="fa fa-check"></i><b>18</b> Introduction to ggplot2</a><ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#grammar-of-graphics-1"><i class="fa fa-check"></i><b>18.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#data-layer"><i class="fa fa-check"></i><b>18.2</b> Data layer</a></li>
<li class="chapter" data-level="18.3" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#aesthetic-layer"><i class="fa fa-check"></i><b>18.3</b> Aesthetic Layer</a></li>
<li class="chapter" data-level="18.4" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#geometries-layer"><i class="fa fa-check"></i><b>18.4</b> Geometries Layer</a></li>
<li class="chapter" data-level="18.5" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#facets-layer"><i class="fa fa-check"></i><b>18.5</b> Facets Layer</a></li>
<li class="chapter" data-level="18.6" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#statistics-layer"><i class="fa fa-check"></i><b>18.6</b> Statistics Layer</a></li>
<li class="chapter" data-level="18.7" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>18.7</b> Coordinates Layer</a></li>
<li class="chapter" data-level="18.8" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#themes-layer"><i class="fa fa-check"></i><b>18.8</b> Themes Layer</a><ul>
<li class="chapter" data-level="18.8.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#built-in-themes"><i class="fa fa-check"></i><b>18.8.1</b> Built-in Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>19</b> Scatterplots</a><ul>
<li class="chapter" data-level="19.1" data-path="scatterplots.html"><a href="scatterplots.html#scatterplots-1"><i class="fa fa-check"></i><b>19.1</b> Scatterplots</a><ul>
<li class="chapter" data-level="19.1.1" data-path="scatterplots.html"><a href="scatterplots.html#adding-other-geoms"><i class="fa fa-check"></i><b>19.1.1</b> Adding other geoms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="plotting-means.html"><a href="plotting-means.html"><i class="fa fa-check"></i><b>20</b> Plotting Means</a><ul>
<li class="chapter" data-level="20.1" data-path="plotting-means.html"><a href="plotting-means.html#bar-graphs"><i class="fa fa-check"></i><b>20.1</b> Bar Graphs</a><ul>
<li class="chapter" data-level="20.1.1" data-path="plotting-means.html"><a href="plotting-means.html#multidimensional-bar-plot"><i class="fa fa-check"></i><b>20.1.1</b> Multidimensional Bar Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="univariate-plots.html"><a href="univariate-plots.html"><i class="fa fa-check"></i><b>21</b> Univariate Plots</a></li>
<li class="chapter" data-level="22" data-path="sjplot.html"><a href="sjplot.html"><i class="fa fa-check"></i><b>22</b> <code>sjPlot</code></a></li>
<li class="chapter" data-level="23" data-path="custom-tables.html"><a href="custom-tables.html"><i class="fa fa-check"></i><b>23</b> Custom Tables</a></li>
<li class="part"><span><b>- Statistical Analysis</b></span></li>
<li class="chapter" data-level="24" data-path="introduction-to-statistical-analysis-in-r.html"><a href="introduction-to-statistical-analysis-in-r.html"><i class="fa fa-check"></i><b>24</b> Introduction to Statistical Analysis in R</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Tutorial and User Guide for the EngleLab</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-cleaning-and-scoring" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> Data Cleaning and Scoring</h1>
<p><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"></p>
<p><img src="images/workflow.png" width="1058" /></p>
<p>Stage 2 in the data processing workflow is <strong>data cleaning and scoring</strong>. In this Chapter you will go over an example of how to write an R Script for this stage of data processing.</p>
<p>In the previous Chapter you created a <em>tidy</em> raw data file that had one row per trial (including practice trials). In this Chapter you will use the <em>tidy</em> raw data file to calculate the <code>FlankerEffect</code> for each Subject. You will end up with a data file that has only one row per Subject.</p>
<p>The <code>FlankerEffect</code> is the difference of <em>mean RTs</em> on incongruent trials minus congruent trials.</p>
<hr />
<div style="text-align: center; font-size: 1.25em">
<p><i class="fas fa-save" style="font-size: 3em"></i></p>
<p>Save a new R script file as <code>1_flanker_score.R</code> in the <em>R Scripts</em> folder</p>
</div>
<hr />
<p>There are 4 blocks of code to create in the script:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Setup</strong></p></li>
<li><p><strong>Import</strong></p></li>
<li><p><strong>Clean and Score</strong></p></li>
<li><p><strong>Output</strong></p></li>
</ol>
<div id="setup-3" class="section level2">
<h2><span class="header-section-number">11.1</span> Setup</h2>
<p>The <em>Setup</em> block for this script will be very similar to the <em>Setup</em> for the <em>raw</em> script you created in the previous Chapter. However, we will also add some parameters for data cleaning criteria. You can copy and paste the code from the <em>raw</em> script for the <em>Setup</em> block and then modify it.</p>
<p>The import directory should be the <em>raw</em> data folder (the output of the <em>raw</em> script created last Chapter). The output directory should be the <em>scored</em> data folder.</p>
<p>The import filename is <em>Flanker_raw.csv</em> (the outputed file from the <em>raw</em> script). The output filename is <em>Flanker_Scores.csv</em>.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb195-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb195-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb195-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb195-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb195-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb195-7" title="7"><span class="kw">library</span>(englelab)</a>
<a class="sourceLine" id="cb195-8" title="8"></a>
<a class="sourceLine" id="cb195-9" title="9"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb195-10" title="10">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb195-11" title="11">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a>
<a class="sourceLine" id="cb195-12" title="12">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>scored</a>
<a class="sourceLine" id="cb195-13" title="13"></a>
<a class="sourceLine" id="cb195-14" title="14"><span class="co">## Set Import/Output Filenames</span></a>
<a class="sourceLine" id="cb195-15" title="15">task &lt;-<span class="st"> &quot;Flanker&quot;</span></a>
<a class="sourceLine" id="cb195-16" title="16">import.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;raw.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb195-17" title="17">output.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;Scores.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb195-18" title="18"><span class="co">#############</span></a></code></pre></div>
<div id="data-cleaning-parameters" class="section level3">
<h3><span class="header-section-number">11.1.1</span> Data Cleaning Parameters</h3>
<p>In the example we are about to go through we will implement the following data cleaning procedures when calculating the <code>FlankerEffect</code>. They will be implemented in the following order</p>
<ol style="list-style-type: decimal">
<li><p><strong>rt.min</strong>: Set RTs less than 200ms to missing (<code>NA</code>) and Accuracy to incorrect (<code>0</code>).</p></li>
<li><p><strong>rt.trim</strong>: Trim RTs. Replace Outlier RTs that are above or below <strong>3.5 SDs</strong> of the mean, with values exactly at <strong>3.5 SDs</strong> above or below the mean. This is evaluated for each Subject by each condition seprately.</p></li>
<li><p><strong>acc.criteria</strong>: Finally remove subjects that performed less than <strong>3.5 standard deviations</strong> below the mean accuracy on any <code>Condition</code> (congruent or incongruent).</p></li>
</ol>
<p>Let’s add these data cleaning parameters to the <em>Setup</em> block</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb196-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb196-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb196-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb196-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb196-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb196-7" title="7"><span class="kw">library</span>(englelab)</a>
<a class="sourceLine" id="cb196-8" title="8"></a>
<a class="sourceLine" id="cb196-9" title="9"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb196-10" title="10">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb196-11" title="11">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a>
<a class="sourceLine" id="cb196-12" title="12">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>scored</a>
<a class="sourceLine" id="cb196-13" title="13"></a>
<a class="sourceLine" id="cb196-14" title="14"><span class="co">## Set Import/Output Filenames</span></a>
<a class="sourceLine" id="cb196-15" title="15">task &lt;-<span class="st"> &quot;Flanker&quot;</span></a>
<a class="sourceLine" id="cb196-16" title="16">import.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;raw.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb196-17" title="17">output.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;Scores.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb196-18" title="18"></a>
<a class="sourceLine" id="cb196-19" title="19"><span class="co">## Set Data Cleaning Params </span></a>
<a class="sourceLine" id="cb196-20" title="20">rt.min &lt;-<span class="st"> </span><span class="dv">200</span></a>
<a class="sourceLine" id="cb196-21" title="21">rt.trim &lt;-<span class="st"> </span><span class="fl">3.5</span></a>
<a class="sourceLine" id="cb196-22" title="22">acc.criteria &lt;-<span class="st"> </span><span class="fl">-3.5</span></a>
<a class="sourceLine" id="cb196-23" title="23"><span class="co">#############</span></a></code></pre></div>
<p>You will now be able to use these objects <code>rt.min</code>, <code>rt.trim</code>, and <code>acc.criteria</code> when writing the code to actually do the data cleaning. This is useful because if you want to change these parameters you can do it right here in the <em>Setup</em> block rather than searching through all your code and figure out where you need to change the values.</p>
</div>
</div>
<div id="import-2" class="section level2">
<h2><span class="header-section-number">11.2</span> Import</h2>
<p>The <em>import</em> block is very simple, especially since we are just importing a <em>.csv</em> file.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" title="1"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb197-2" title="2">import &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">here</span>(import.dir, import.file))</a>
<a class="sourceLine" id="cb197-3" title="3"><span class="co">##############</span></a></code></pre></div>
</div>
<div id="data-cleaning-and-scoring-1" class="section level2">
<h2><span class="header-section-number">11.3</span> Data Cleaning and Scoring</h2>
<p>The next block is where we do the actual <strong>data cleaning and task scoring</strong>.</p>
<p>This step is more complicated and often times requires some forethought. But we don’t always have the best forethought so you will likely re-write previous lines of code.</p>
<p>One thing you must think about before writing the script for this stage is the statistical analyses you eventually plan on conducting. The type of statistical analyses you plan on conducting will determine the final dataframe you want to end up at in this stage of data preparation.</p>
<p>What are the final dependent variables (or task scores) you want to calaculate? In the Flanker task there are several task scores we might want to calculate (in a regression context).</p>
<ul>
<li><p><strong>FlankerEffect on RT</strong>: Mean reaction time difference between incongruent and congruent trials</p></li>
<li><p><strong>FlankerEffect on Accuracy</strong>: Mean accuracy difference between incongruent and congruent trials</p></li>
<li><p><strong>Flanker Binned Scores</strong>: A scoring method to combine accuracy and reaction time (an alternative to difference scores)</p></li>
</ul>
<hr />
</div>
<div id="trimming-1" class="section level2">
<h2><span class="header-section-number">11.4</span> Trimming</h2>
<p>First we need to get rid of <strong>practice trials</strong> / keep only <strong>real trials</strong>.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1"><span class="co">## Data Cleaning and Scoring ####</span></a>
<a class="sourceLine" id="cb198-2" title="2"><span class="co">## Trimming </span></a>
<a class="sourceLine" id="cb198-3" title="3">data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb198-4" title="4"><span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>)</a>
<a class="sourceLine" id="cb198-5" title="5"><span class="co">#################################</span></a></code></pre></div>
<p>Then,</p>
<ol style="list-style-type: decimal">
<li>set RTs less than 200ms to missing (<code>NA</code>) and Accuracy to <code>0</code> using <code>mutate()</code> and <code>ifelse()</code></li>
</ol>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" title="1"><span class="co">## Data Cleaning and Scoring ####</span></a>
<a class="sourceLine" id="cb199-2" title="2"><span class="co">## Trimming </span></a>
<a class="sourceLine" id="cb199-3" title="3">data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb199-4" title="4"><span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb199-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="ot">NA</span>, RT),</a>
<a class="sourceLine" id="cb199-6" title="6">         <span class="dt">Accuracy =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="dv">0</span>, Accuracy))</a>
<a class="sourceLine" id="cb199-7" title="7"><span class="co">#################################</span></a></code></pre></div>
<p>And,</p>
<ol start="2" style="list-style-type: decimal">
<li>Trim RTs, grouped by <strong>Subject</strong> and <strong>Condition</strong> using the <code>trim()</code> function from my <code>datawrangling</code> package.</li>
</ol>
<p><code>trim()</code> is an easy way to trim values on a variable using a certain <em>z-score</em> cutoff. The main arguments to pass onto <code>trim()</code> are:</p>
<ul>
<li><p><strong>variables</strong>: The column name that contains the values you want to trim</p></li>
<li><p><strong>cutoff</strong>: What <em>z-score</em> cutoff value you want to use</p></li>
<li><p><strong>replace</strong>: How you want to replace the outlier values. Options are, <code>"mean"</code>, <code>"cutoff"</code>, or <code>"NA</code></p></li>
</ul>
<p>You can use <code>group_by()</code> with <code>trim()</code> to trim independently for each <code>Condition</code> (congruent, incongruent, neutral). Always <code>ungroup()</code> afterwards.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1"><span class="co">## Data Cleaning and Scoring ####</span></a>
<a class="sourceLine" id="cb200-2" title="2"><span class="co">## Trimming </span></a>
<a class="sourceLine" id="cb200-3" title="3">data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-4" title="4"><span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="ot">NA</span>, RT),</a>
<a class="sourceLine" id="cb200-6" title="6">         <span class="dt">Accuracy =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="dv">0</span>, Accuracy)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-7" title="7"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-8" title="8"><span class="st">  </span><span class="kw">trim</span>(<span class="dt">variables =</span> <span class="st">&quot;RT&quot;</span>, <span class="dt">cutoff =</span> rt.trim, <span class="dt">replace =</span> <span class="st">&quot;cutoff&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-9" title="9"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb200-10" title="10"><span class="co">#################################</span></a></code></pre></div>
<p>We will implement the third data cleaning procedure later.</p>
</div>
<div id="calculate-flankereffect" class="section level2">
<h2><span class="header-section-number">11.5</span> Calculate FlankerEffect</h2>
<p>What we want to do is calculate both the <code>FlankerEffect</code> and <code>FlankerBinned</code> Scores. These are separate scoring procedures. The general approach we will take is to create two separate dataframes for each procedure, based off the <code>data_trim</code>. Then we will <code>merge</code> the two dataframes back into one.</p>
<p>First calculate the <code>FlankerEffect</code>. We want to calcualte the <code>FlankerEffect</code> on <code>RT</code> using only <code>Accurate</code> trials. Since we also want to calculate the <code>FlankerEffect</code> on <code>Accuracy</code> we cannot just use a <code>filter()</code>. Instead we should <code>mutate()</code> the values in <code>RT</code> to be <code>NA</code> when <code>Accuracy</code> is <code>0</code>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" title="1"><span class="co">## Calculate Flanker Effect</span></a>
<a class="sourceLine" id="cb201-2" title="2">data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb201-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT))</a></code></pre></div>
<p>Next step is to calculate mean <code>RT</code> and mean <code>Accuracy</code> separately for congruent, incongruent, and neutral trials.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" title="1"><span class="co">## Calculate Flanker Effect</span></a>
<a class="sourceLine" id="cb202-2" title="2">data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb202-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb202-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb202-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb202-6" title="6">            <span class="dt">Accuracy.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb202-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<p>Because we used <code>group_by(Subject, Condition)</code>, <code>summarise()</code> will calculate the mean <code>RT</code> and mean <code>Accuracy</code> separately for each <code>Subject</code> and each <code>Condition</code>.</p>
<p><strong>Always be sure to <code>ungroup()</code> afterwards.</strong></p>
<p>View the data frame. In the console type</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" title="1"><span class="kw">View</span>(data_flanker)</a></code></pre></div>
<p>Now rather than having one row per trial, <code>group_by()</code> and <code>summarise()</code> has aggregated the data down to <code>Subject</code> x <code>Condition</code>. What we want to do is calculate the difference between incongruent and congruent conditions on <code>RT.mean</code> and <code>Accuracy.mean</code>. However, congruent, incongruent, and neutral conditions are on separate rows.</p>
<p>What we need to do is <code>reshape</code> the data so that there is a column for each <code>Condition</code> on <code>RT.mean</code> and <code>Accuracy.mean</code>. Our columns should be</p>
<ul>
<li><p><code>congruent_RT.mean</code></p></li>
<li><p><code>incongruent_RT.mean</code></p></li>
<li><p><code>neutral_RT.mean</code></p></li>
<li><p><code>congruent_Accuracy.mean</code></p></li>
<li><p><code>incongruent_Accuracy.mean</code></p></li>
<li><p><code>neutral_Accuracy.mean</code></p></li>
</ul>
<p>Typically, to <code>reshape</code> a data frame we would use the <code>gather()</code> and <code>spread()</code> functions from the <code>tidyr</code> package. However, these do not allow reshaping on more than one <code>value</code> column. We have two <code>value</code> columns, <code>RT.mean</code> and <code>Accuracy.mean</code>.</p>
<p>Luckily I have created a function that can allow us to do this, <code>reshape_spread()</code> from my <code>datawrangling</code> package. The main arguments you need to specify are:</p>
<ul>
<li><p><strong>variables</strong>: The column name that contains the key variables to <code>spread</code> on</p></li>
<li><p><strong>values</strong>: The column name(s) that hold the values to be used</p></li>
<li><p><strong>id</strong>: Which columns should be preserved (i.e. <code>Subject</code>)</p></li>
</ul>
<p>So we can add something like this</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" title="1"><span class="co">## Calculate Flanker Effect</span></a>
<a class="sourceLine" id="cb204-2" title="2">data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb204-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb204-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb204-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb204-6" title="6">            <span class="dt">ACC.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb204-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb204-8" title="8"><span class="st">  </span><span class="kw">reshape_spread</span>(<span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>,</a>
<a class="sourceLine" id="cb204-9" title="9">                 <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;ACC.mean&quot;</span>))</a></code></pre></div>
<p>Now <code>View()</code> the data frame. There should now be only ONE row per <code>Subject</code>. We can now just use <code>mutate()</code> to calculate the difference between these columns to get the <code>FlankerEffect</code>.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" title="1"><span class="co">## Calculate Flanker Effect</span></a>
<a class="sourceLine" id="cb205-2" title="2">data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-5" title="5"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb205-6" title="6">            <span class="dt">Accuracy.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-7" title="7"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-8" title="8"><span class="st">  </span><span class="kw">reshape_spread</span>(<span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>,</a>
<a class="sourceLine" id="cb205-9" title="9">                 <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;Accuracy.mean&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb205-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">FlankerEffect_RT =</span> incongruent_RT.mean <span class="op">-</span><span class="st"> </span>congruent_RT.mean,</a>
<a class="sourceLine" id="cb205-11" title="11">         <span class="dt">FlankerEffect_ACC =</span> incongruent_Accuracy.mean <span class="op">-</span><span class="st"> </span>congruent_Accuracy.mean)</a></code></pre></div>
</div>
<div id="remove-subjects" class="section level2">
<h2><span class="header-section-number">11.6</span> Remove Subjects</h2>
<p>Next, we should implement the third data cleaning procedure listed above.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>acc.criteria</strong>: Finally remove subjects that performed less than <strong>3.5 standard deviations</strong> below the mean accuracy on any <code>Condition</code> (congruent, incongruent, or neutral).</li>
</ol>
<p>It is convenient to do it now because we have a column with mean Accuracy for congruent and incongruent trials. We also want to do this before applying the <code>binning</code> procedure.</p>
<p>The approach I like to take with entirely removing subjects is to keep a record of those subjects in a data file somewhere. To do this we will 1) create a new data frame of subjects that will be removed and then 2) use a function I created, <code>remove_save()</code> from the <code>datawrangling</code> package. This function is a short hand way of doing two things at once.</p>
<ol style="list-style-type: decimal">
<li><p>Removing the subjects from the full data file</p></li>
<li><p>Saving the removed subjects to a specified directory.</p></li>
</ol>
<p>The criteria we are removing subjects based on are those who performed 3.5 SDs below the mean. So we first need to calculate a column of z-scores (on SD units), then filter those who are below 3.5 z-scores.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" title="1"><span class="co">## Remove Subjects</span></a>
<a class="sourceLine" id="cb206-2" title="2">data_remove &lt;-<span class="st"> </span>data_flanker <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-3" title="3"><span class="st">  </span><span class="kw">center</span>(<span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;congruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb206-4" title="4">                       <span class="st">&quot;incongruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb206-5" title="5">                       <span class="st">&quot;neutral_Accuracy.mean&quot;</span>), </a>
<a class="sourceLine" id="cb206-6" title="6">         <span class="dt">standardize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-7" title="7"><span class="st">  </span><span class="kw">filter</span>(congruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span></a>
<a class="sourceLine" id="cb206-8" title="8"><span class="st">           </span>incongruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb206-9" title="9"><span class="st">           </span>neutral_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria)</a></code></pre></div>
<p>Then use <code>remove_save()</code>. The main arguments to specify are:</p>
<ul>
<li><p><strong>x</strong>: the data frame that contains ALL subjects</p></li>
<li><p><strong>remove</strong>: the data frame that contains subjects to be removed</p></li>
<li><p><strong>output.dir</strong>: directory to output file with removed subjects to</p></li>
<li><p><strong>output.file</strong>: name of file with removed subjects</p></li>
</ul>
<p>I put the removed subjects in a folder called <em>“removed”</em> and name the file something like <em>“Flanker_removed.csv”</em>.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" title="1"><span class="co">## Remove Subjects</span></a>
<a class="sourceLine" id="cb207-2" title="2">data_remove &lt;-<span class="st"> </span>data_flanker <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb207-3" title="3"><span class="st">  </span><span class="kw">center</span>(<span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;congruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb207-4" title="4">                       <span class="st">&quot;incongruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb207-5" title="5">                       <span class="st">&quot;neutral_Accuracy.mean&quot;</span>), </a>
<a class="sourceLine" id="cb207-6" title="6">         <span class="dt">standardize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb207-7" title="7"><span class="st">  </span><span class="kw">filter</span>(congruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span></a>
<a class="sourceLine" id="cb207-8" title="8"><span class="st">           </span>incongruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb207-9" title="9"><span class="st">           </span>neutral_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria)</a>
<a class="sourceLine" id="cb207-10" title="10"></a>
<a class="sourceLine" id="cb207-11" title="11">data_flanker &lt;-<span class="st"> </span><span class="kw">remove_save</span>(data_flanker, data_remove, </a>
<a class="sourceLine" id="cb207-12" title="12">                            <span class="dt">output.dir =</span> <span class="kw">here</span>(output.dir, <span class="st">&quot;removed&quot;</span>), </a>
<a class="sourceLine" id="cb207-13" title="13">                            <span class="dt">output.file =</span> <span class="kw">paste</span>(task, <span class="st">&quot;removed.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>))</a></code></pre></div>
<p>If any subjects were removed you should now see a folder called <strong>removed</strong> in the <strong>Scored Data</strong> folder with a file called “Flanker_removed.csv”.</p>
</div>
<div id="calculate-binned-scores" class="section level2">
<h2><span class="header-section-number">11.7</span> Calculate Binned Scores</h2>
<p>Great! We have now calculated FlankerEffects scores and performed the data cleaning procedures. Now we need to calculate Binned scores. The <code>data_flanker</code> data frame is no longer in a format that we can calculate bin scores. We need to use the trimmed data frame that has trial level data.</p>
<p>We should remove the poor performing subjects and Missing RTs. <strong>This step is actually really important for the binning procedure because bin scores are relative to other subjects in the data.</strong></p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" title="1"><span class="co">## Calculate Binned scores</span></a>
<a class="sourceLine" id="cb208-2" title="2">data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb208-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject))</a></code></pre></div>
<p>This is stating, keep only Trials without missing values on <code>RT</code> AND Subjects that are NOT (<code>!</code>) in <code>data_remove</code>.</p>
<p>We also need to remove neutral trials to calculate bin scores. Bin scores are based on comparing one condition to a baseline condition. In this case we want to compare the incongruent condition to the baseline congruent condition. So we need to get rid of neutral conditions.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" title="1"><span class="co">## Calculate Binned scores</span></a>
<a class="sourceLine" id="cb209-2" title="2">data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb209-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), Condition <span class="op">!=</span><span class="st"> &quot;neutral&quot;</span>,</a>
<a class="sourceLine" id="cb209-4" title="4">         <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject))</a></code></pre></div>
<p>And finally calculate bin scores using <code>bin_score()</code> from the <code>englelab</code> package. The main arguments to specify are:</p>
<ul>
<li><p><strong>x</strong>: The data frame</p></li>
<li><p><strong>rt.col</strong>: Column name that contains the reaction time data. <em>Default = “RT”</em></p></li>
<li><p><strong>accuracy.col</strong>: Column name that contains the accuracy data. <em>Default = “Accuracy”</em></p></li>
<li><p><strong>condition.col</strong>: Column name that contains the trial condition type. <em>Default = “Condition”</em></p></li>
<li><p><strong>baseline.condition</strong>: The values that specify the baseline condition</p></li>
<li><p><strong>type</strong>: How should Bin trials be aggregated, “sum” or “mean”. <em>Default = “mean”</em></p></li>
<li><p><strong>id</strong>: Column name that contains subject identifiers. <em>Default = “Subject”</em></p></li>
</ul>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" title="1"><span class="co">## Calculate Binned scores</span></a>
<a class="sourceLine" id="cb210-2" title="2">data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb210-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), Condition <span class="op">!=</span><span class="st"> &quot;neutral&quot;</span>,</a>
<a class="sourceLine" id="cb210-4" title="4">         <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb210-5" title="5"><span class="st">  </span><span class="kw">bin_score</span>(<span class="dt">baseline.condition =</span> <span class="st">&quot;congruent&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mean&quot;</span>,) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb210-6" title="6"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">FlankerBin =</span> <span class="st">&quot;BinScore&quot;</span>)</a></code></pre></div>
<p>Awesome! Now we have two data frames, one, <code>data_flanker</code>, with FlankerEffect scores and another, <code>data_binned</code> with FlankerBin scores. They both have one row per subject.</p>
</div>
<div id="merge" class="section level2">
<h2><span class="header-section-number">11.8</span> Merge</h2>
<p>Now we can merge these two data frames together using the <code>merge()</code> function from base R.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" title="1"><span class="co">## Merge</span></a>
<a class="sourceLine" id="cb211-2" title="2">data_flanker &lt;-<span class="st"> </span><span class="kw">merge</span>(data_flanker, data_binned, <span class="dt">by =</span> <span class="st">&quot;Subject&quot;</span>, <span class="dt">all =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now view the <code>data_flanker</code>. It should be one row per subject and have columns for <code>FlanekrEffect_RT</code>, <code>FlankerEffect_ACC</code>, and <code>FlankerBin</code>.</p>
</div>
<div id="save-data-file" class="section level2">
<h2><span class="header-section-number">11.9</span> Save data file</h2>
<p>And finally save the data file</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" title="1"><span class="co">## Output ####</span></a>
<a class="sourceLine" id="cb212-2" title="2"><span class="kw">write_csv</span>(data_flanker, <span class="kw">here</span>(output.dir, output.file))</a>
<a class="sourceLine" id="cb212-3" title="3"><span class="co">##############</span></a></code></pre></div>
<hr />
<p>If we put it all together your R script should look something like:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb213-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb213-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb213-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb213-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb213-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb213-7" title="7"><span class="kw">library</span>(englelab)</a>
<a class="sourceLine" id="cb213-8" title="8"></a>
<a class="sourceLine" id="cb213-9" title="9"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb213-10" title="10">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb213-11" title="11">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a>
<a class="sourceLine" id="cb213-12" title="12">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>scored</a>
<a class="sourceLine" id="cb213-13" title="13"></a>
<a class="sourceLine" id="cb213-14" title="14"><span class="co">## Set Import/Output Filenames</span></a>
<a class="sourceLine" id="cb213-15" title="15">task &lt;-<span class="st"> &quot;Flanker&quot;</span></a>
<a class="sourceLine" id="cb213-16" title="16">import.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;raw.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb213-17" title="17">output.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;Scores.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb213-18" title="18"></a>
<a class="sourceLine" id="cb213-19" title="19"><span class="co">## Set Data Cleaning Params </span></a>
<a class="sourceLine" id="cb213-20" title="20">rt.min &lt;-<span class="st"> </span><span class="dv">200</span></a>
<a class="sourceLine" id="cb213-21" title="21">rt.trim &lt;-<span class="st"> </span><span class="fl">3.5</span></a>
<a class="sourceLine" id="cb213-22" title="22">acc.criteria &lt;-<span class="st"> </span><span class="fl">-3.5</span></a>
<a class="sourceLine" id="cb213-23" title="23"><span class="co">#############</span></a>
<a class="sourceLine" id="cb213-24" title="24"></a>
<a class="sourceLine" id="cb213-25" title="25"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb213-26" title="26">import &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">here</span>(import.dir, import.file))</a>
<a class="sourceLine" id="cb213-27" title="27"><span class="co">##############</span></a>
<a class="sourceLine" id="cb213-28" title="28"></a>
<a class="sourceLine" id="cb213-29" title="29"><span class="co">## Data Cleaning and Scoring ####</span></a>
<a class="sourceLine" id="cb213-30" title="30"><span class="co">## Trimming </span></a>
<a class="sourceLine" id="cb213-31" title="31">data_trim &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-32" title="32"><span class="st">  </span><span class="kw">filter</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-33" title="33"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="ot">NA</span>, RT),</a>
<a class="sourceLine" id="cb213-34" title="34">         <span class="dt">Accuracy =</span> <span class="kw">ifelse</span>(RT <span class="op">&lt;</span><span class="st"> </span>rt.min, <span class="dv">0</span>, Accuracy)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-35" title="35"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-36" title="36"><span class="st">  </span><span class="kw">trim</span>(<span class="dt">variables =</span> <span class="st">&quot;RT&quot;</span>, <span class="dt">cutoff =</span> rt.trim, <span class="dt">replace =</span> <span class="st">&quot;cutoff&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-37" title="37"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb213-38" title="38"></a>
<a class="sourceLine" id="cb213-39" title="39"><span class="co">## Calculate Flanker Effect</span></a>
<a class="sourceLine" id="cb213-40" title="40">data_flanker &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-41" title="41"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RT =</span> <span class="kw">ifelse</span>(Accuracy <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, RT)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-42" title="42"><span class="st">  </span><span class="kw">group_by</span>(Subject, Condition) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-43" title="43"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RT.mean =</span> <span class="kw">mean</span>(RT, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb213-44" title="44">            <span class="dt">Accuracy.mean =</span> <span class="kw">mean</span>(Accuracy, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-45" title="45"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-46" title="46"><span class="st">  </span><span class="kw">reshape_spread</span>(<span class="dt">variables =</span> <span class="st">&quot;Condition&quot;</span>,</a>
<a class="sourceLine" id="cb213-47" title="47">                 <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;RT.mean&quot;</span>, <span class="st">&quot;Accuracy.mean&quot;</span>),</a>
<a class="sourceLine" id="cb213-48" title="48">                 <span class="dt">id =</span> <span class="st">&quot;Subject&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-49" title="49"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">FlankerEffect_RT =</span> incongruent_RT.mean <span class="op">-</span><span class="st"> </span>congruent_RT.mean,</a>
<a class="sourceLine" id="cb213-50" title="50">         <span class="dt">FlankerEffect_ACC =</span> incongruent_Accuracy.mean <span class="op">-</span><span class="st"> </span>congruent_Accuracy.mean)</a>
<a class="sourceLine" id="cb213-51" title="51"></a>
<a class="sourceLine" id="cb213-52" title="52"><span class="co">## Remove Subjects</span></a>
<a class="sourceLine" id="cb213-53" title="53">data_remove &lt;-<span class="st"> </span>data_flanker <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-54" title="54"><span class="st">  </span><span class="kw">center</span>(<span class="dt">variables =</span> <span class="kw">c</span>(<span class="st">&quot;congruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb213-55" title="55">                       <span class="st">&quot;incongruent_Accuracy.mean&quot;</span>, </a>
<a class="sourceLine" id="cb213-56" title="56">                       <span class="st">&quot;neutral_Accuracy.mean&quot;</span>), </a>
<a class="sourceLine" id="cb213-57" title="57">         <span class="dt">standardize =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-58" title="58"><span class="st">  </span><span class="kw">filter</span>(congruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span></a>
<a class="sourceLine" id="cb213-59" title="59"><span class="st">           </span>incongruent_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb213-60" title="60"><span class="st">           </span>neutral_Accuracy.mean_z <span class="op">&lt;</span><span class="st"> </span>acc.criteria)</a>
<a class="sourceLine" id="cb213-61" title="61"></a>
<a class="sourceLine" id="cb213-62" title="62">data_flanker &lt;-<span class="st"> </span><span class="kw">remove_save</span>(data_flanker, data_remove, </a>
<a class="sourceLine" id="cb213-63" title="63">                            <span class="dt">output.dir =</span> <span class="kw">here</span>(output.dir, <span class="st">&quot;removed&quot;</span>), </a>
<a class="sourceLine" id="cb213-64" title="64">                            <span class="dt">output.file =</span> <span class="kw">paste</span>(task, <span class="st">&quot;removed.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>))</a>
<a class="sourceLine" id="cb213-65" title="65"></a>
<a class="sourceLine" id="cb213-66" title="66"><span class="co">## Calculate Binned scores</span></a>
<a class="sourceLine" id="cb213-67" title="67">data_binned &lt;-<span class="st"> </span>data_trim <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-68" title="68"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(RT), Condition <span class="op">!=</span><span class="st"> &quot;neutral&quot;</span>,</a>
<a class="sourceLine" id="cb213-69" title="69">         <span class="op">!</span>(Subject <span class="op">%in%</span><span class="st"> </span>data_remove<span class="op">$</span>Subject)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-70" title="70"><span class="st">  </span><span class="kw">bin_score</span>(<span class="dt">baseline.condition =</span> <span class="st">&quot;congruent&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mean&quot;</span>,) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb213-71" title="71"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">FlankerBin =</span> <span class="st">&quot;BinScore&quot;</span>)</a>
<a class="sourceLine" id="cb213-72" title="72"></a>
<a class="sourceLine" id="cb213-73" title="73"><span class="co">## Merge</span></a>
<a class="sourceLine" id="cb213-74" title="74">data_flanker &lt;-<span class="st"> </span><span class="kw">merge</span>(data_flanker, data_binned, <span class="dt">by =</span> <span class="st">&quot;Subject&quot;</span>, <span class="dt">all =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb213-75" title="75"><span class="co">#################################</span></a>
<a class="sourceLine" id="cb213-76" title="76"></a>
<a class="sourceLine" id="cb213-77" title="77"><span class="co">## Output ####</span></a>
<a class="sourceLine" id="cb213-78" title="78"><span class="kw">write_csv</span>(data_flanker, <span class="kw">here</span>(output.dir, output.file))</a>
<a class="sourceLine" id="cb213-79" title="79"><span class="co">##############</span></a>
<a class="sourceLine" id="cb213-80" title="80"></a>
<a class="sourceLine" id="cb213-81" title="81"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a></code></pre></div>
</div>
<div id="masterscript-2" class="section level2">
<h2><span class="header-section-number">11.10</span> Masterscript</h2>
<p>Now you can add lines of code in the manuscript to execute or <code>source()</code> the script “1_flanker_score.R”.</p>
<hr />
<hr />
<p><strong>Something</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="messy-to-tidy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="merge-create-a-final-data-file.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
