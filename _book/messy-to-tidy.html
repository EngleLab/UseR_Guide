<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R Tutorial and User Guide for the EngleLab</title>
  <meta name="description" content="This is an R Tutorial and User Guide for the EngleLab">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R Tutorial and User Guide for the EngleLab" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an R Tutorial and User Guide for the EngleLab" />
  <meta name="github-repo" content="EngleLab" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Tutorial and User Guide for the EngleLab" />
  
  <meta name="twitter:description" content="This is an R Tutorial and User Guide for the EngleLab" />
  

<meta name="author" content="Jason Tsukahara">


<meta name="date" content="2019-05-31">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="merging-individual-subject-files.html">
<link rel="next" href="data-cleaning-and-scoring.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-guide"><i class="fa fa-check"></i>How to use this guide</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#workflow"><i class="fa fa-check"></i>Workflow</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i>Overview</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started in R</b></span></li>
<li class="chapter" data-level="1" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>1</b> Installation</a><ul>
<li class="chapter" data-level="1.1" data-path="installation.html"><a href="installation.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="installation.html"><a href="installation.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="installation.html"><a href="installation.html#the-r-studio-environemnt"><i class="fa fa-check"></i><b>1.3</b> The R Studio Environemnt</a></li>
<li class="chapter" data-level="1.4" data-path="installation.html"><a href="installation.html#r-studio-settings"><i class="fa fa-check"></i><b>1.4</b> R Studio Settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-r.html"><a href="basic-r.html"><i class="fa fa-check"></i><b>2</b> Basic R</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-r.html"><a href="basic-r.html#creating-r-objects"><i class="fa fa-check"></i><b>2.1</b> Creating R objects</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-r.html"><a href="basic-r.html#classes"><i class="fa fa-check"></i><b>2.1.1</b> Classes</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-r.html"><a href="basic-r.html#vectors"><i class="fa fa-check"></i><b>2.1.2</b> Vectors</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-r.html"><a href="basic-r.html#factors"><i class="fa fa-check"></i><b>2.1.3</b> Factors</a></li>
<li class="chapter" data-level="2.1.4" data-path="basic-r.html"><a href="basic-r.html#lists"><i class="fa fa-check"></i><b>2.1.4</b> Lists</a></li>
<li class="chapter" data-level="2.1.5" data-path="basic-r.html"><a href="basic-r.html#data-frames"><i class="fa fa-check"></i><b>2.1.5</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-r.html"><a href="basic-r.html#ifthen-statements"><i class="fa fa-check"></i><b>2.2</b> If…then Statements</a></li>
<li class="chapter" data-level="2.3" data-path="basic-r.html"><a href="basic-r.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basic-r.html"><a href="basic-r.html#installing-and-loading-r-packages"><i class="fa fa-check"></i><b>2.3.1</b> Installing and Loading R Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-r.html"><a href="basic-r.html#more-r-basic-resources"><i class="fa fa-check"></i><b>2.4</b> More R Basic Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>3</b> Intermediate R</a><ul>
<li class="chapter" data-level="3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loops"><i class="fa fa-check"></i><b>3.1</b> For Loops</a></li>
<li class="chapter" data-level="3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#creating-your-own-functions"><i class="fa fa-check"></i><b>3.2.1</b> Creating Your Own Functions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Working with Data</b></span></li>
<li class="chapter" data-level="4" data-path="the-tidyverse.html"><a href="the-tidyverse.html"><i class="fa fa-check"></i><b>4</b> The tidyverse</a></li>
<li class="chapter" data-level="5" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html"><i class="fa fa-check"></i><b>5</b> Importing and Outputing Data</a><ul>
<li class="chapter" data-level="5.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#csv"><i class="fa fa-check"></i><b>5.1</b> CSV</a><ul>
<li class="chapter" data-level="5.1.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.csv"><i class="fa fa-check"></i><b>5.1.1</b> Import <code>.csv</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.csv"><i class="fa fa-check"></i><b>5.1.2</b> Output <code>.csv</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#tab-delimited"><i class="fa fa-check"></i><b>5.2</b> Tab-Delimited</a><ul>
<li class="chapter" data-level="5.2.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.txt"><i class="fa fa-check"></i><b>5.2.1</b> Import <code>.txt</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.txt"><i class="fa fa-check"></i><b>5.2.2</b> Output <code>.txt</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#spss"><i class="fa fa-check"></i><b>5.3</b> SPSS</a><ul>
<li class="chapter" data-level="5.3.1" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#import-.sav"><i class="fa fa-check"></i><b>5.3.1</b> Import <code>.sav</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#output-.sav"><i class="fa fa-check"></i><b>5.3.2</b> Output <code>.sav</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#rstudio-import-gui"><i class="fa fa-check"></i><b>5.4</b> RStudio Import GUI</a></li>
<li class="chapter" data-level="5.5" data-path="importing-and-outputing-data.html"><a href="importing-and-outputing-data.html#merging-data-files"><i class="fa fa-check"></i><b>5.5</b> Merging Data Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html"><i class="fa fa-check"></i><b>6</b> Data Manipulation using <code>dplyr</code></a><ul>
<li class="chapter" data-level="6.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#setup"><i class="fa fa-check"></i><b>6.1</b> Setup</a></li>
<li class="chapter" data-level="6.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#import"><i class="fa fa-check"></i><b>6.2</b> Import</a></li>
<li class="chapter" data-level="6.3" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#rename"><i class="fa fa-check"></i><b>6.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="6.4" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#filter"><i class="fa fa-check"></i><b>6.4</b> <code>filter()</code></a></li>
<li class="chapter" data-level="6.5" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#select"><i class="fa fa-check"></i><b>6.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="6.6" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#mutate"><i class="fa fa-check"></i><b>6.6</b> <code>mutate()</code></a><ul>
<li class="chapter" data-level="6.6.1" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#changing-values-in-an-existing-column"><i class="fa fa-check"></i><b>6.6.1</b> Changing values in an existing column</a></li>
<li class="chapter" data-level="6.6.2" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#creating-a-new-column"><i class="fa fa-check"></i><b>6.6.2</b> Creating a new column</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#group_by"><i class="fa fa-check"></i><b>6.7</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="6.8" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#summarise"><i class="fa fa-check"></i><b>6.8</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="6.9" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#spread"><i class="fa fa-check"></i><b>6.9</b> <code>spread()</code></a></li>
<li class="chapter" data-level="6.10" data-path="data-manipulation-using-dplyr.html"><a href="data-manipulation-using-dplyr.html#pipe-operator"><i class="fa fa-check"></i><b>6.10</b> Pipe Operator %&gt;%</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html"><i class="fa fa-check"></i><b>7</b> Common Data Manipulations</a><ul>
<li class="chapter" data-level="7.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#descriptive-statistics"><i class="fa fa-check"></i><b>7.1</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="7.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#centering-and-standardizing-variables"><i class="fa fa-check"></i><b>7.2</b> Centering and Standardizing Variables</a></li>
<li class="chapter" data-level="7.3" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#trimming"><i class="fa fa-check"></i><b>7.3</b> Trimming</a></li>
<li class="chapter" data-level="7.4" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#composites"><i class="fa fa-check"></i><b>7.4</b> Composites</a></li>
<li class="chapter" data-level="7.5" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#scale-transformations"><i class="fa fa-check"></i><b>7.5</b> Scale Transformations</a><ul>
<li class="chapter" data-level="7.5.1" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#log"><i class="fa fa-check"></i><b>7.5.1</b> log</a></li>
<li class="chapter" data-level="7.5.2" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#polynomial"><i class="fa fa-check"></i><b>7.5.2</b> polynomial</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="common-data-manipulations.html"><a href="common-data-manipulations.html#custom-transformations"><i class="fa fa-check"></i><b>7.6</b> Custom Transformations</a></li>
</ul></li>
<li class="part"><span><b>III Example: Data Preparation</b></span></li>
<li class="chapter" data-level="8" data-path="example-data-set.html"><a href="example-data-set.html"><i class="fa fa-check"></i><b>8</b> Example Data Set</a><ul>
<li class="chapter" data-level="8.1" data-path="example-data-set.html"><a href="example-data-set.html#initial-setup"><i class="fa fa-check"></i><b>8.1</b> Initial Setup</a><ul>
<li class="chapter" data-level="8.1.1" data-path="example-data-set.html"><a href="example-data-set.html#rstudio-project"><i class="fa fa-check"></i><b>8.1.1</b> RStudio Project</a></li>
<li class="chapter" data-level="8.1.2" data-path="example-data-set.html"><a href="example-data-set.html#directory-organization"><i class="fa fa-check"></i><b>8.1.2</b> Directory Organization</a></li>
<li class="chapter" data-level="8.1.3" data-path="example-data-set.html"><a href="example-data-set.html#r-scripts"><i class="fa fa-check"></i><b>8.1.3</b> R Scripts</a></li>
<li class="chapter" data-level="8.1.4" data-path="example-data-set.html"><a href="example-data-set.html#masterscript"><i class="fa fa-check"></i><b>8.1.4</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="example-data-set.html"><a href="example-data-set.html#example-data-flanker-task"><i class="fa fa-check"></i><b>8.2</b> Example Data: Flanker Task</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html"><i class="fa fa-check"></i><b>9</b> Merging Individual Subject Files</a><ul>
<li class="chapter" data-level="9.1" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html#setup-1"><i class="fa fa-check"></i><b>9.1</b> Setup</a></li>
<li class="chapter" data-level="9.2" data-path="merging-individual-subject-files.html"><a href="merging-individual-subject-files.html#files_bind"><i class="fa fa-check"></i><b>9.2</b> <code>files_bind()</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html"><i class="fa fa-check"></i><b>10</b> Messy to Tidy</a><ul>
<li class="chapter" data-level="10.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#setup-2"><i class="fa fa-check"></i><b>10.1</b> Setup</a><ul>
<li class="chapter" data-level="10.1.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#load-packages"><i class="fa fa-check"></i><b>10.1.1</b> Load packages</a></li>
<li class="chapter" data-level="10.1.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#set-importoutput-directories"><i class="fa fa-check"></i><b>10.1.2</b> Set Import/Output Directories</a></li>
<li class="chapter" data-level="10.1.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#set-importoutput-file-names"><i class="fa fa-check"></i><b>10.1.3</b> Set Import/Output File Names</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#import-1"><i class="fa fa-check"></i><b>10.2</b> Import</a></li>
<li class="chapter" data-level="10.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#tidy-raw-data"><i class="fa fa-check"></i><b>10.3</b> Tidy raw data</a><ul>
<li class="chapter" data-level="10.3.1" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#filter-1"><i class="fa fa-check"></i><b>10.3.1</b> Filter</a></li>
<li class="chapter" data-level="10.3.2" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#rename-columns"><i class="fa fa-check"></i><b>10.3.2</b> Rename Columns</a></li>
<li class="chapter" data-level="10.3.3" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#change-values"><i class="fa fa-check"></i><b>10.3.3</b> Change Values</a></li>
<li class="chapter" data-level="10.3.4" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#select-columns"><i class="fa fa-check"></i><b>10.3.4</b> Select Columns</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#output"><i class="fa fa-check"></i><b>10.4</b> Output</a></li>
<li class="chapter" data-level="10.5" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#copy-and-paste"><i class="fa fa-check"></i><b>10.5</b> Copy and Paste</a></li>
<li class="chapter" data-level="10.6" data-path="messy-to-tidy.html"><a href="messy-to-tidy.html#masterscript-1"><i class="fa fa-check"></i><b>10.6</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html"><i class="fa fa-check"></i><b>11</b> Data Cleaning and Scoring</a><ul>
<li class="chapter" data-level="11.1" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#setup-3"><i class="fa fa-check"></i><b>11.1</b> Setup</a><ul>
<li class="chapter" data-level="11.1.1" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#data-cleaning-parameters"><i class="fa fa-check"></i><b>11.1.1</b> Data Cleaning Parameters</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#import-2"><i class="fa fa-check"></i><b>11.2</b> Import</a></li>
<li class="chapter" data-level="11.3" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#data-cleaning-and-scoring-1"><i class="fa fa-check"></i><b>11.3</b> Data Cleaning and Scoring</a></li>
<li class="chapter" data-level="11.4" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#trimming-1"><i class="fa fa-check"></i><b>11.4</b> Trimming</a></li>
<li class="chapter" data-level="11.5" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#calculate-flankereffect"><i class="fa fa-check"></i><b>11.5</b> Calculate FlankerEffect</a></li>
<li class="chapter" data-level="11.6" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#remove-subjects"><i class="fa fa-check"></i><b>11.6</b> Remove Subjects</a></li>
<li class="chapter" data-level="11.7" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#calculate-binned-scores"><i class="fa fa-check"></i><b>11.7</b> Calculate Binned Scores</a></li>
<li class="chapter" data-level="11.8" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#merge"><i class="fa fa-check"></i><b>11.8</b> Merge</a></li>
<li class="chapter" data-level="11.9" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#save-data-file"><i class="fa fa-check"></i><b>11.9</b> Save data file</a></li>
<li class="chapter" data-level="11.10" data-path="data-cleaning-and-scoring.html"><a href="data-cleaning-and-scoring.html#masterscript-2"><i class="fa fa-check"></i><b>11.10</b> Masterscript</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html"><i class="fa fa-check"></i><b>12</b> Merge: Create A Final Data File</a><ul>
<li class="chapter" data-level="12.1" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#setup-4"><i class="fa fa-check"></i><b>12.1</b> Setup</a></li>
<li class="chapter" data-level="12.2" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#merge-1"><i class="fa fa-check"></i><b>12.2</b> Merge</a></li>
<li class="chapter" data-level="12.3" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#select-and-trim"><i class="fa fa-check"></i><b>12.3</b> Select and Trim</a></li>
<li class="chapter" data-level="12.4" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#output-1"><i class="fa fa-check"></i><b>12.4</b> Output</a></li>
<li class="chapter" data-level="12.5" data-path="merge-create-a-final-data-file.html"><a href="merge-create-a-final-data-file.html#masterscript-3"><i class="fa fa-check"></i><b>12.5</b> Masterscript</a></li>
</ul></li>
<li class="part"><span><b>IV Data Science Practices</b></span></li>
<li class="chapter" data-level="13" data-path="reproducibility.html"><a href="reproducibility.html"><i class="fa fa-check"></i><b>13</b> Reproducibility</a><ul>
<li class="chapter" data-level="13.1" data-path="reproducibility.html"><a href="reproducibility.html#what-is-real"><i class="fa fa-check"></i><b>13.1</b> What is real?</a></li>
<li class="chapter" data-level="13.2" data-path="reproducibility.html"><a href="reproducibility.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>13.2</b> Where does your analysis live?</a><ul>
<li class="chapter" data-level="13.2.1" data-path="reproducibility.html"><a href="reproducibility.html#project-level"><i class="fa fa-check"></i><b>13.2.1</b> Project Level</a></li>
<li class="chapter" data-level="13.2.2" data-path="reproducibility.html"><a href="reproducibility.html#script-level"><i class="fa fa-check"></i><b>13.2.2</b> Script Level</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="reproducibility.html"><a href="reproducibility.html#environment"><i class="fa fa-check"></i><b>13.3</b> Environment</a><ul>
<li class="chapter" data-level="13.3.1" data-path="reproducibility.html"><a href="reproducibility.html#working-directory"><i class="fa fa-check"></i><b>13.3.1</b> Working Directory</a></li>
<li class="chapter" data-level="13.3.2" data-path="reproducibility.html"><a href="reproducibility.html#loaded-packages"><i class="fa fa-check"></i><b>13.3.2</b> Loaded Packages</a></li>
<li class="chapter" data-level="13.3.3" data-path="reproducibility.html"><a href="reproducibility.html#objects"><i class="fa fa-check"></i><b>13.3.3</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="reproducibility.html"><a href="reproducibility.html#folder-organization"><i class="fa fa-check"></i><b>13.4</b> Folder Organization</a></li>
<li class="chapter" data-level="13.5" data-path="reproducibility.html"><a href="reproducibility.html#naming-r-scripts"><i class="fa fa-check"></i><b>13.5</b> Naming R Scripts</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="organization.html"><a href="organization.html"><i class="fa fa-check"></i><b>14</b> Organization</a><ul>
<li class="chapter" data-level="14.1" data-path="organization.html"><a href="organization.html#data-collection"><i class="fa fa-check"></i><b>14.1</b> Data Collection</a></li>
<li class="chapter" data-level="14.2" data-path="organization.html"><a href="organization.html#data-analysis"><i class="fa fa-check"></i><b>14.2</b> Data Analysis</a></li>
<li class="chapter" data-level="14.3" data-path="organization.html"><a href="organization.html#workflow-package"><i class="fa fa-check"></i><b>14.3</b> <code>workflow</code> package</a><ul>
<li class="chapter" data-level="14.3.1" data-path="organization.html"><a href="organization.html#setup-repository-organization"><i class="fa fa-check"></i><b>14.3.1</b> Setup Repository Organization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="r-script-templates.html"><a href="r-script-templates.html"><i class="fa fa-check"></i><b>15</b> R Script Templates</a><ul>
<li class="chapter" data-level="15.1" data-path="r-script-templates.html"><a href="r-script-templates.html#building-a-template-workflow"><i class="fa fa-check"></i><b>15.1</b> Building a Template Workflow</a></li>
<li class="chapter" data-level="15.2" data-path="r-script-templates.html"><a href="r-script-templates.html#englelab-github"><i class="fa fa-check"></i><b>15.2</b> EngleLab GitHub</a></li>
<li class="chapter" data-level="15.3" data-path="r-script-templates.html"><a href="r-script-templates.html#masterscript-template"><i class="fa fa-check"></i><b>15.3</b> Masterscript Template</a><ul>
<li class="chapter" data-level="15.3.1" data-path="r-script-templates.html"><a href="r-script-templates.html#directories"><i class="fa fa-check"></i><b>15.3.1</b> <code>directories</code></a></li>
<li class="chapter" data-level="15.3.2" data-path="r-script-templates.html"><a href="r-script-templates.html#source"><i class="fa fa-check"></i><b>15.3.2</b> <code>source()</code></a></li>
<li class="chapter" data-level="15.3.3" data-path="r-script-templates.html"><a href="r-script-templates.html#render"><i class="fa fa-check"></i><b>15.3.3</b> <code>render()</code></a></li>
<li class="chapter" data-level="15.3.4" data-path="r-script-templates.html"><a href="r-script-templates.html#data-collection-repository"><i class="fa fa-check"></i><b>15.3.4</b> Data Collection Repository</a></li>
<li class="chapter" data-level="15.3.5" data-path="r-script-templates.html"><a href="r-script-templates.html#data-analysis-repository"><i class="fa fa-check"></i><b>15.3.5</b> Data Analysis Repository</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="r-script-templates.html"><a href="r-script-templates.html#messy-to-tidy-template"><i class="fa fa-check"></i><b>15.4</b> <em>Messy</em> to <em>Tidy</em> Template</a></li>
<li class="chapter" data-level="15.5" data-path="r-script-templates.html"><a href="r-script-templates.html#tidy-to-scored-template"><i class="fa fa-check"></i><b>15.5</b> <em>Tidy</em> to <em>Scored</em> Template</a></li>
</ul></li>
<li class="part"><span><b>V Data Ananlysis</b></span></li>
<li class="chapter" data-level="16" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html"><i class="fa fa-check"></i><b>16</b> Introduction to Data Analysis</a><ul>
<li class="chapter" data-level="16.1" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#r-markdown"><i class="fa fa-check"></i><b>16.1</b> R Markdown</a><ul>
<li class="chapter" data-level="16.1.1" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#what-is-an-r-markdown-file"><i class="fa fa-check"></i><b>16.1.1</b> What is an R Markdown File?</a></li>
<li class="chapter" data-level="16.1.2" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#yaml-header"><i class="fa fa-check"></i><b>16.1.2</b> YAML header</a></li>
<li class="chapter" data-level="16.1.3" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#r-code-chunks"><i class="fa fa-check"></i><b>16.1.3</b> R code chunks</a></li>
<li class="chapter" data-level="16.1.4" data-path="introduction-to-data-analysis.html"><a href="introduction-to-data-analysis.html#formatted-text"><i class="fa fa-check"></i><b>16.1.4</b> Formatted text</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>– Data Visualization</b></span></li>
<li class="chapter" data-level="17" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html"><i class="fa fa-check"></i><b>17</b> Fundamentals of Data Visualization</a><ul>
<li class="chapter" data-level="17.1" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#grammar-of-graphics"><i class="fa fa-check"></i><b>17.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="17.2" data-path="fundamentals-of-data-visualization.html"><a href="fundamentals-of-data-visualization.html#plotting-functions-in-r"><i class="fa fa-check"></i><b>17.2</b> Plotting Functions in R</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html"><i class="fa fa-check"></i><b>18</b> Introduction to ggplot2</a><ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#grammar-of-graphics-1"><i class="fa fa-check"></i><b>18.1</b> Grammar of Graphics</a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#data-layer"><i class="fa fa-check"></i><b>18.2</b> Data layer</a></li>
<li class="chapter" data-level="18.3" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#aesthetic-layer"><i class="fa fa-check"></i><b>18.3</b> Aesthetic Layer</a></li>
<li class="chapter" data-level="18.4" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#geometries-layer"><i class="fa fa-check"></i><b>18.4</b> Geometries Layer</a></li>
<li class="chapter" data-level="18.5" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#facets-layer"><i class="fa fa-check"></i><b>18.5</b> Facets Layer</a></li>
<li class="chapter" data-level="18.6" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#statistics-layer"><i class="fa fa-check"></i><b>18.6</b> Statistics Layer</a></li>
<li class="chapter" data-level="18.7" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>18.7</b> Coordinates Layer</a></li>
<li class="chapter" data-level="18.8" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#themes-layer"><i class="fa fa-check"></i><b>18.8</b> Themes Layer</a><ul>
<li class="chapter" data-level="18.8.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#built-in-themes"><i class="fa fa-check"></i><b>18.8.1</b> Built-in Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i><b>19</b> Scatterplots</a><ul>
<li class="chapter" data-level="19.1" data-path="scatterplots.html"><a href="scatterplots.html#scatterplots-1"><i class="fa fa-check"></i><b>19.1</b> Scatterplots</a><ul>
<li class="chapter" data-level="19.1.1" data-path="scatterplots.html"><a href="scatterplots.html#adding-other-geoms"><i class="fa fa-check"></i><b>19.1.1</b> Adding other geoms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="plotting-means.html"><a href="plotting-means.html"><i class="fa fa-check"></i><b>20</b> Plotting Means</a><ul>
<li class="chapter" data-level="20.1" data-path="plotting-means.html"><a href="plotting-means.html#bar-graphs"><i class="fa fa-check"></i><b>20.1</b> Bar Graphs</a><ul>
<li class="chapter" data-level="20.1.1" data-path="plotting-means.html"><a href="plotting-means.html#multidimensional-bar-plot"><i class="fa fa-check"></i><b>20.1.1</b> Multidimensional Bar Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="univariate-plots.html"><a href="univariate-plots.html"><i class="fa fa-check"></i><b>21</b> Univariate Plots</a></li>
<li class="chapter" data-level="22" data-path="sjplot.html"><a href="sjplot.html"><i class="fa fa-check"></i><b>22</b> <code>sjPlot</code></a></li>
<li class="chapter" data-level="23" data-path="custom-tables.html"><a href="custom-tables.html"><i class="fa fa-check"></i><b>23</b> Custom Tables</a></li>
<li class="part"><span><b>- Statistical Analysis</b></span></li>
<li class="chapter" data-level="24" data-path="introduction-to-statistical-analysis-in-r.html"><a href="introduction-to-statistical-analysis-in-r.html"><i class="fa fa-check"></i><b>24</b> Introduction to Statistical Analysis in R</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Tutorial and User Guide for the EngleLab</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="messy-to-tidy" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Messy to Tidy</h1>
<p><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"></p>
<p><img src="images/workflow.png" width="1058" /></p>
<p>Stage 1 in the data processing workflow is <strong>converting <em>messy</em> raw data files to <em>tidy</em> raw data files</strong>. In this Chapter you will go over an example of how to write an R Script for this stage of data processing.</p>
<p>This part is not always fun and it can be very tempting to skip and go straight to creating a <em>scored</em> data file that is ready for data analysis. Because data analysis is the fun part! However, I strongly advise against that. There are at least a few good reasons why:</p>
<ol style="list-style-type: decimal">
<li><p>Sometimes you actually NEED the raw trial level data. For instance, to do reliability or internal consistency analyses.</p></li>
<li><p>Visualizing and analyzing trial-level data can help you better understand your data.</p></li>
<li><p>You or some other researcher might want to go back and run analyses starting from the trial-level data. Maybe you/they want to score the data slightly differently than you did before.</p></li>
<li><p>Data storage. Storing and sharing your data in a <em>tidy</em> raw data format makes SO MUCH more sense than storing your <em>messy</em> raw data. If working with your <em>messy</em> raw data gives you a headache now imagine how much worse that is when you have not thought about that data for a long time.</p></li>
</ol>
<p>And so many other reasons</p>
<hr />
<p>In the previous Chapter you should have downloaded the example Flanker data set, setup your directory organization, and created an RStudio Project.</p>
<p>Go ahead and open the RStudio Project if you have not done so already.</p>
<hr />
<div style="text-align: center; font-size: 1.25em">
<p><i class="fas fa-save" style="font-size: 3em"></i></p>
<p>Save a new R script file as <code>0_flanker_raw.R</code> in the <em>R Scripts</em> folder</p>
</div>
<hr />
<hr />
<div style="text-align: center; font-size: 1.25em">
<p>Source the masterscript</p>
</div>
<hr />
<p>After sourcing the masterscript you should see a new file in your project’s <em>root</em> directory called <code>directiories.rds</code>. For now don’t do anything with it but just be aware that it is there.</p>
<p>There are 4 sections to create in the script:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Setup</strong></p></li>
<li><p><strong>Import</strong></p></li>
<li><p><strong>Tidy</strong></p></li>
<li><p><strong>Output</strong></p></li>
</ol>
<div id="setup-2" class="section level2">
<h2><span class="header-section-number">10.1</span> Setup</h2>
<p>In the <em>Setup</em> section we 1) load any packages, using <code>library()</code>, that are required for the script, 2) set the import/output filepaths and filenames, and 3) set any other parameters for the script.</p>
<p>Let’s go over how to create the setup section one piece at a time.</p>
<div id="load-packages" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Load packages</h3>
<ul>
<li><p><code>here</code>: You will use <code>here</code> to reference import and output file paths</p></li>
<li><p><code>readr</code>: You will use <code>readr</code> to import and export files</p></li>
<li><p><code>dplyr</code>: You will use <code>dplyr</code> to change the <em>messy</em> raw data file into a <em>tidy</em> raw data file</p></li>
<li><p><code>datawrangling</code>: You will use a function in this package to remove duplicate subject numbers in the <em>messy</em> raw data file.</p></li>
</ul>
<p>At the top of your script write the following code (with commented sections)</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb163-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb163-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb163-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb163-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb163-6" title="6"><span class="kw">library</span>(datawrangling)</a></code></pre></div>
</div>
<div id="set-importoutput-directories" class="section level3">
<h3><span class="header-section-number">10.1.2</span> Set Import/Output Directories</h3>
<p>It is good practice to set the import and output directories at the top of your script.</p>
<p>First, you need to import the file <code>directories.rds</code>. This is not standard, it is a method that is likely unique to me. I came up with it on my own. But I have found it useful to use <code>directories.rds</code> to manage file paths across different scripts within the same project. And it is pretty simple to use.</p>
<p>Let’s see how this works. Import <code>directories.rds</code></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a></code></pre></div>
<p>Now print the <code>directories</code> object to your console</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" title="1">directories</a></code></pre></div>
<p>You can see that <code>directories</code> is a <em>list</em> object that contains different filepaths. To access those file paths:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1">directories<span class="op">$</span>raw</a></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" title="1">directories<span class="op">$</span>messy</a></code></pre></div>
<p>These are <em>relative</em> file paths from the projects <em>root</em> directory.</p>
<p>We can set the import and output file directories as such</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb168-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb168-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb168-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb168-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb168-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb168-7" title="7"></a>
<a class="sourceLine" id="cb168-8" title="8"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb168-9" title="9">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb168-10" title="10">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>messy</a>
<a class="sourceLine" id="cb168-11" title="11">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a></code></pre></div>
</div>
<div id="set-importoutput-file-names" class="section level3">
<h3><span class="header-section-number">10.1.3</span> Set Import/Output File Names</h3>
<p>Now set the import and output file names.</p>
<p>Let’s output the <em>tidy</em> raw data files as <strong>Flanker_raw.csv</strong>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb169-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb169-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb169-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb169-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb169-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb169-7" title="7"></a>
<a class="sourceLine" id="cb169-8" title="8"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb169-9" title="9">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb169-10" title="10">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>messy</a>
<a class="sourceLine" id="cb169-11" title="11">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a>
<a class="sourceLine" id="cb169-12" title="12"></a>
<a class="sourceLine" id="cb169-13" title="13"><span class="co">## Set Import/Output Filenames</span></a>
<a class="sourceLine" id="cb169-14" title="14">task &lt;-<span class="st"> &quot;Flanker&quot;</span></a>
<a class="sourceLine" id="cb169-15" title="15">import.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;.txt&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb169-16" title="16">output.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;raw.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb169-17" title="17"><span class="co">#############</span></a></code></pre></div>
<p>That is all we need to include in the <em>Setup</em> block. Notice how I added some <code>####</code> on the top line after <em>Setup</em> and then included more <code>#############</code> at the very bottom of the <em>Setup</em> block, after the <em>Set Import/Output Filenames</em> section. This helps to organize your script by blocks. For instance, you can collapse all the code in the <em>Setup</em> block by clicking on the downward arrow/carrot to the right of <em>Setup</em>.</p>
</div>
</div>
<div id="import-1" class="section level2">
<h2><span class="header-section-number">10.2</span> Import</h2>
<p>The next block of code is for importing the data file.</p>
<p>After the <em>Setup</em> block add a section for the <em>Import</em> block</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb170-2" title="2"></a>
<a class="sourceLine" id="cb170-3" title="3"><span class="co">##############</span></a></code></pre></div>
<p>You can import the <em>Flanker.txt</em> tab-delimited file using <code>read_delim()</code> from the <code>readr</code> package. To specificy the file path we can use the <code>here()</code> function from the <code>here</code> package. When you loaded the <code>here</code> package using <code>library(here)</code> it searched for a <em>.Rproj</em> file. Now when you use the function <code>here()</code> it will create a filepath to the directory where the <em>.Rproj</em> file is located, your projects <em>root</em> directory. Go ahead and type <code>here()</code> into the console.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" title="1"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb171-2" title="2"><span class="kw">here</span>()</a></code></pre></div>
<p>To specify a filepath and filename in our <em>project</em> directory, we can use <code>here()</code></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1"><span class="kw">here</span>(<span class="st">&quot;filepath&quot;</span>, <span class="st">&quot;filename&quot;</span>)</a></code></pre></div>
<p>Using the <code>import.dir</code> and <code>import.file</code> objects we created in the <em>Setup</em> block, this makes it really easy to specify the filepath and filename.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" title="1"><span class="kw">here</span>(import.dir, import.file)</a></code></pre></div>
<pre><code>## [1] &quot;/Users/jasontsukahara/Dropbox (GaTech)/My Work/Coding Projects/R/R-Tutorial/Data Files/Raw Data/E-Merge/Flanker.txt&quot;</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" title="1"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb175-2" title="2">import &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="kw">here</span>(import.dir, import.file), </a>
<a class="sourceLine" id="cb175-3" title="3">                     <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">escape_double =</span> <span class="ot">FALSE</span>, <span class="dt">trim_ws =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb175-4" title="4"><span class="co">##############</span></a></code></pre></div>
<p>Now it happens on occasion that the wrong subject number is entered in when an RA is starting up a task. This can result in duplicate Subject numbers in the E-Merge file. Luckily I have created a function to remove the duplicate subjects, and put their information (with session date and time) into a specific file. This file will be created in a new folder called “duplicates”.</p>
<p>The function is <code>duplicates_remove()</code> from the <code>datawrangling</code> package on my GitHub.</p>
<p>It can be difficult to remember what arguments you need to include in a function. To see helpful documentation about a function you can type in the console</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" title="1">?duplicates_remove</a></code></pre></div>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" title="1"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb177-2" title="2">import &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="kw">here</span>(import.dir, import.file), </a>
<a class="sourceLine" id="cb177-3" title="3">                     <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">escape_double =</span> <span class="ot">FALSE</span>, <span class="dt">trim_ws =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb177-4" title="4"><span class="st">  </span><span class="kw">duplicates_remove</span>(<span class="dt">taskname =</span> task, </a>
<a class="sourceLine" id="cb177-5" title="5">                    <span class="dt">output.folder =</span> <span class="kw">here</span>(output.dir, <span class="st">&quot;duplicates&quot;</span>))</a>
<a class="sourceLine" id="cb177-6" title="6"><span class="co">##############</span></a></code></pre></div>
<p>View the dataframe</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">View</span>(import)</a></code></pre></div>
<p>It is a mess, right? Here are some things you need to know about the <em>messy</em> raw data file. These are the columns and what type of values they contain:</p>
<p><strong>Subject</strong>: Subject number</p>
<p><strong>Procedure[Trial]</strong>: Procedure type (keep: TrialProc and PracTrialProc)</p>
<p><strong>PracTrialList.Sample</strong>: Trial number for practice trials</p>
<p><strong>TrialList.Sample</strong>: Trial number for real trials</p>
<p><strong>FlankerType</strong>: condition for real and practice trials (Values are: congruent, incongruent, and neutral)</p>
<p><strong>PracSlideTarget.RT</strong>: Reaction time for practice trials</p>
<p><strong>PracSlideTarget.ACC</strong>: Accuracy for practice trials</p>
<p><strong>PracSlideTarget.RESP</strong>: Response for practice trials ({LEFTARROW} = left and {RIGHTARROW} = right)</p>
<p><strong>SlideTarget.RT</strong>: Reaction time for real trials</p>
<p><strong>SlideTarget.ACC</strong>: Accuracy for real trials</p>
<p><strong>SlideTarget.RESP</strong>: Response for real trials ({LEFTARROW} = left and {RIGHTARROW} = right)</p>
<p><strong>TargerDirection</strong>: direction of the target arrow for practice trials</p>
<p><strong>TargetDirection</strong>: direction of the target arrow for real trials</p>
<p><strong>SessionDate</strong>: Date of session</p>
<p><strong>SessionTime</strong>: Time of session</p>
</div>
<div id="tidy-raw-data" class="section level2">
<h2><span class="header-section-number">10.3</span> Tidy raw data</h2>
<p>The next block is where we actually <em>tidy</em> the <em>messy</em> raw data. This basically involves filtering rows, renaming columns, changing values in columns, and selecting columns. And accordingly you will use these <code>dplyr</code> functions to do so:</p>
<ul>
<li><p><code>filter()</code></p></li>
<li><p><code>rename()</code></p></li>
<li><p><code>mutate()</code></p></li>
<li><p><code>select()</code></p></li>
</ul>
<p>This is why <code>dplyr</code> is so intuitive. The language of <code>dplyr</code> directly corresponds to how we think about working with data.</p>
<p>Create a block for <em>tidying</em> the raw data after the <em>Import</em> block</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb179-2" title="2"></a>
<a class="sourceLine" id="cb179-3" title="3"><span class="co">#####################</span></a></code></pre></div>
<div id="filter-1" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Filter</h3>
<p>Filter only relevant rows. We want to keep only the rows that contain trials from the practice and real trials.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb180-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>)</a>
<a class="sourceLine" id="cb180-4" title="4"><span class="co">#####################</span></a></code></pre></div>
<p>The column names are contained in single quotes because the names contain the special characters <code>[ ]</code>. There are certain characters R does not like to use as variable names and one of them is square brackets.</p>
</div>
<div id="rename-columns" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Rename Columns</h3>
<p>Now the column specifying real vs practice trials is a little tedious to keep typing out since it requires the single quotes and brackets. To rename columns we can use <code>rename()</code> function in <code>dplyr</code>.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb181-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb181-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb181-4" title="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb181-5" title="5"><span class="co">#####################</span></a></code></pre></div>
</div>
<div id="change-values" class="section level3">
<h3><span class="header-section-number">10.3.3</span> Change Values</h3>
<p>Chabge the values in <code>TrialProc</code>.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1"><span class="kw">unique</span>(data_raw<span class="op">$</span>TrialProc)</a></code></pre></div>
<pre><code>## [1] &quot;PracTrialProc&quot; &quot;TrialProc&quot;</code></pre>
<p>Right now real trials have the value of <code>TrialProc</code>. The same name as the column, not good! And the “practice” trials have the value of <code>PractTrialProc</code>. Let’s simply change these values to <code>real</code> and <code>practice</code>, respectively.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb184-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb184-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb184-4" title="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb184-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb184-6" title="6">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>))</a>
<a class="sourceLine" id="cb184-7" title="7"><span class="co">#####################</span></a></code></pre></div>
<p>Evaluate that this worked</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" title="1"><span class="kw">unique</span>(data_raw<span class="op">$</span>TrialProc)</a></code></pre></div>
<pre><code>## [1] &quot;practice&quot; &quot;real&quot;</code></pre>
<p>Okay now let’s move on to figuring out what other columns we want to keep and if we need to do any more computations on them.</p>
<p>We want to keep the columns that specify the following information</p>
<ul>
<li>Subject number</li>
<li>TrialProc (real vs practice)</li>
<li>Trial number</li>
<li>Condition (congruent vs incongruent)</li>
<li>Reaction time</li>
<li>Accuracy</li>
<li>Response</li>
<li>Target arrow direction (left or right)</li>
<li>Session Date</li>
<li>Session Time</li>
</ul>
<p>This gets a little more tricky here because the information for some of these variables are in one column for practice trials and a different column for real trials. That means we need to merge the information from these two columns into one.</p>
<p>For instance the RT data for practice trials is contained in the column <code>PracSlideTarget.RT</code> and for real trials RT data is in <code>SlideTarget.RT</code>. We can create a new column labeled <code>RT</code> that on <code>real</code> trials, values are taken from the <code>SlideTarget.RT</code> column and on <code>practice</code> trials, values are taken from the <code>PracSlideTarget.RT</code> column.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb187-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb187-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb187-4" title="4"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb187-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb187-6" title="6">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>),</a>
<a class="sourceLine" id="cb187-7" title="7">         <span class="dt">RT =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RT,</a>
<a class="sourceLine" id="cb187-8" title="8">                        TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RT))</a>
<a class="sourceLine" id="cb187-9" title="9"><span class="co">#####################</span></a></code></pre></div>
<p>We can do the same thing for trial, accuracy, response, and target arrow direction. Combining them all into one <code>mutate()</code> function</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb188-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb188-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb188-4" title="4"><span class="st">           `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb188-5" title="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb188-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb188-7" title="7">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>),</a>
<a class="sourceLine" id="cb188-8" title="8">         <span class="dt">RT =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RT,</a>
<a class="sourceLine" id="cb188-9" title="9">                        TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RT),</a>
<a class="sourceLine" id="cb188-10" title="10">         <span class="dt">Trial =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>     <span class="op">~</span><span class="st"> </span>TrialList.Sample,</a>
<a class="sourceLine" id="cb188-11" title="11">                           TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracTrialList.Sample),</a>
<a class="sourceLine" id="cb188-12" title="12">         <span class="dt">Accuracy =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.ACC,</a>
<a class="sourceLine" id="cb188-13" title="13">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.ACC),</a>
<a class="sourceLine" id="cb188-14" title="14">         <span class="dt">Response =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RESP,</a>
<a class="sourceLine" id="cb188-15" title="15">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RESP),</a>
<a class="sourceLine" id="cb188-16" title="16">         <span class="dt">TargetArrowDirection =</span> </a>
<a class="sourceLine" id="cb188-17" title="17">           <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>TargetDirection,</a>
<a class="sourceLine" id="cb188-18" title="18">                     TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>TargerDirection))</a>
<a class="sourceLine" id="cb188-19" title="19"><span class="co">#####################</span></a></code></pre></div>
<p>Notice how I sometimes put <code>case_when()</code> on a different line. This is just to make sure the code does not run too far off to the right so we do not have to horizontally scroll too much.</p>
<p>You might want to change the values in the Response and CorrectResponse columns to be more clear (left and right).</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb189-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb189-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb189-4" title="4"><span class="st">           `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb189-5" title="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb189-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb189-7" title="7">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>),</a>
<a class="sourceLine" id="cb189-8" title="8">         <span class="dt">RT =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RT,</a>
<a class="sourceLine" id="cb189-9" title="9">                        TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RT),</a>
<a class="sourceLine" id="cb189-10" title="10">         <span class="dt">Trial =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>     <span class="op">~</span><span class="st"> </span>TrialList.Sample,</a>
<a class="sourceLine" id="cb189-11" title="11">                           TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracTrialList.Sample),</a>
<a class="sourceLine" id="cb189-12" title="12">         <span class="dt">Accuracy =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.ACC,</a>
<a class="sourceLine" id="cb189-13" title="13">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.ACC),</a>
<a class="sourceLine" id="cb189-14" title="14">         <span class="dt">TargetArrowDirection =</span> </a>
<a class="sourceLine" id="cb189-15" title="15">           <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>TargetDirection,</a>
<a class="sourceLine" id="cb189-16" title="16">                     TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>TargerDirection),</a>
<a class="sourceLine" id="cb189-17" title="17">         <span class="dt">Response =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RESP,</a>
<a class="sourceLine" id="cb189-18" title="18">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RESP),</a>
<a class="sourceLine" id="cb189-19" title="19">         <span class="dt">Response =</span> <span class="kw">case_when</span>(Response <span class="op">==</span><span class="st"> &quot;z&quot;</span> <span class="op">~</span><span class="st"> &quot;left&quot;</span>,</a>
<a class="sourceLine" id="cb189-20" title="20">                              Response <span class="op">==</span><span class="st"> &quot;{/}&quot;</span> <span class="op">~</span><span class="st"> &quot;right&quot;</span>))</a>
<a class="sourceLine" id="cb189-21" title="21"><span class="co">#####################</span></a></code></pre></div>
</div>
<div id="select-columns" class="section level3">
<h3><span class="header-section-number">10.3.4</span> Select Columns</h3>
<p>The last thing to do is select only the columns we want to keep. Remember we want to only select columns with the following information</p>
<ul>
<li>Subject number</li>
<li>Trial number</li>
<li>Condition</li>
<li>Reaction time</li>
<li>Accuracy</li>
<li>Response</li>
<li>Correct Response</li>
<li>Target arrow direction</li>
<li>Session Date</li>
<li>Session Time</li>
</ul>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb190-2" title="2">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb190-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb190-4" title="4"><span class="st">           `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb190-5" title="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb190-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb190-7" title="7">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>),</a>
<a class="sourceLine" id="cb190-8" title="8">         <span class="dt">RT =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RT,</a>
<a class="sourceLine" id="cb190-9" title="9">                        TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RT),</a>
<a class="sourceLine" id="cb190-10" title="10">         <span class="dt">Trial =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>     <span class="op">~</span><span class="st"> </span>TrialList.Sample,</a>
<a class="sourceLine" id="cb190-11" title="11">                           TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracTrialList.Sample),</a>
<a class="sourceLine" id="cb190-12" title="12">         <span class="dt">Accuracy =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.ACC,</a>
<a class="sourceLine" id="cb190-13" title="13">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.ACC),</a>
<a class="sourceLine" id="cb190-14" title="14">         <span class="dt">TargetArrowDirection =</span> </a>
<a class="sourceLine" id="cb190-15" title="15">           <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>TargetDirection,</a>
<a class="sourceLine" id="cb190-16" title="16">                     TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>TargerDirection),</a>
<a class="sourceLine" id="cb190-17" title="17">         <span class="dt">Response =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RESP,</a>
<a class="sourceLine" id="cb190-18" title="18">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RESP),</a>
<a class="sourceLine" id="cb190-19" title="19">         <span class="dt">Response =</span> <span class="kw">case_when</span>(Response <span class="op">==</span><span class="st"> &quot;z&quot;</span> <span class="op">~</span><span class="st"> &quot;left&quot;</span>,</a>
<a class="sourceLine" id="cb190-20" title="20">                              Response <span class="op">==</span><span class="st"> &quot;{/}&quot;</span> <span class="op">~</span><span class="st"> &quot;right&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb190-21" title="21"><span class="st">  </span><span class="kw">select</span>(Subject, TrialProc, Trial, <span class="dt">Condition =</span> FlankerType, </a>
<a class="sourceLine" id="cb190-22" title="22">         RT, Accuracy, Response, TargetArrowDirection, </a>
<a class="sourceLine" id="cb190-23" title="23">         SessionDate, SessionTime)</a>
<a class="sourceLine" id="cb190-24" title="24"><span class="co">#####################</span></a></code></pre></div>
<p>And that is it for the <em>Tidy raw data</em> block! Almost done</p>
</div>
</div>
<div id="output" class="section level2">
<h2><span class="header-section-number">10.4</span> Output</h2>
<p>The final block is to <em>Output</em> or Save the data file to your computer. This step is too easy</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" title="1"><span class="co">## Output ####</span></a>
<a class="sourceLine" id="cb191-2" title="2"><span class="kw">write_csv</span>(data_raw, <span class="kw">here</span>(output.dir, output.file))</a>
<a class="sourceLine" id="cb191-3" title="3"><span class="co">##############</span></a></code></pre></div>
<p>That’s it!</p>
<p>One last thing that is good to put at the end of every script.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a></code></pre></div>
<p>This will remove all the objects from the current <strong>Environment</strong>.</p>
<hr />
<p>Then if we were to put it all together, using the template from the previous chapter:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" title="1"><span class="co">## Setup ####</span></a>
<a class="sourceLine" id="cb193-2" title="2"><span class="co">## Load Packages</span></a>
<a class="sourceLine" id="cb193-3" title="3"><span class="kw">library</span>(here)</a>
<a class="sourceLine" id="cb193-4" title="4"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb193-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb193-6" title="6"><span class="kw">library</span>(datawrangling)</a>
<a class="sourceLine" id="cb193-7" title="7"></a>
<a class="sourceLine" id="cb193-8" title="8"><span class="co">## Set Import/Output Directories</span></a>
<a class="sourceLine" id="cb193-9" title="9">directories &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">here</span>(<span class="st">&quot;directories.rds&quot;</span>))</a>
<a class="sourceLine" id="cb193-10" title="10">import.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>messy</a>
<a class="sourceLine" id="cb193-11" title="11">output.dir &lt;-<span class="st"> </span>directories<span class="op">$</span>raw</a>
<a class="sourceLine" id="cb193-12" title="12"></a>
<a class="sourceLine" id="cb193-13" title="13"><span class="co">## Set Import/Output Filename</span></a>
<a class="sourceLine" id="cb193-14" title="14">task &lt;-<span class="st"> &quot;Flanker&quot;</span></a>
<a class="sourceLine" id="cb193-15" title="15">import.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;.txt&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb193-16" title="16">output.file &lt;-<span class="st"> </span><span class="kw">paste</span>(task, <span class="st">&quot;raw.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb193-17" title="17"><span class="co">#############</span></a>
<a class="sourceLine" id="cb193-18" title="18"></a>
<a class="sourceLine" id="cb193-19" title="19"><span class="co">## Import ####</span></a>
<a class="sourceLine" id="cb193-20" title="20">import &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="kw">here</span>(import.dir, import.file), </a>
<a class="sourceLine" id="cb193-21" title="21">                     <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">escape_double =</span> <span class="ot">FALSE</span>, <span class="dt">trim_ws =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb193-22" title="22"><span class="st">  </span><span class="kw">duplicates_remove</span>(<span class="dt">taskname =</span> task, </a>
<a class="sourceLine" id="cb193-23" title="23">                    <span class="dt">output.folder =</span> <span class="kw">here</span>(output.dir, <span class="st">&quot;duplicates&quot;</span>))</a>
<a class="sourceLine" id="cb193-24" title="24"><span class="co">##############</span></a>
<a class="sourceLine" id="cb193-25" title="25"></a>
<a class="sourceLine" id="cb193-26" title="26"><span class="co">## Tidy raw data ####</span></a>
<a class="sourceLine" id="cb193-27" title="27">data_raw &lt;-<span class="st"> </span>import <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb193-28" title="28"><span class="st">  </span><span class="kw">filter</span>(<span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;TrialProc&quot;</span> <span class="op">|</span><span class="st"> </span></a>
<a class="sourceLine" id="cb193-29" title="29"><span class="st">           `</span><span class="dt">Procedure[Trial]</span><span class="st">`</span><span class="op">==</span><span class="st">&quot;PracTrialProc&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb193-30" title="30"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">TrialProc =</span> <span class="st">`</span><span class="dt">Procedure[Trial]</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb193-31" title="31"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">TrialProc =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;TrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;real&quot;</span>,</a>
<a class="sourceLine" id="cb193-32" title="32">                               TrialProc <span class="op">==</span><span class="st"> &quot;PracTrialProc&quot;</span> <span class="op">~</span><span class="st"> &quot;practice&quot;</span>),</a>
<a class="sourceLine" id="cb193-33" title="33">         <span class="dt">RT =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RT,</a>
<a class="sourceLine" id="cb193-34" title="34">                        TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RT),</a>
<a class="sourceLine" id="cb193-35" title="35">         <span class="dt">Trial =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span>     <span class="op">~</span><span class="st"> </span>TrialList.Sample,</a>
<a class="sourceLine" id="cb193-36" title="36">                           TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracTrialList.Sample),</a>
<a class="sourceLine" id="cb193-37" title="37">         <span class="dt">Accuracy =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.ACC,</a>
<a class="sourceLine" id="cb193-38" title="38">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.ACC),</a>
<a class="sourceLine" id="cb193-39" title="39">         <span class="dt">TargetArrowDirection =</span> </a>
<a class="sourceLine" id="cb193-40" title="40">           <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>TargetDirection,</a>
<a class="sourceLine" id="cb193-41" title="41">                     TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>TargerDirection),</a>
<a class="sourceLine" id="cb193-42" title="42">         <span class="dt">Response =</span> <span class="kw">case_when</span>(TrialProc <span class="op">==</span><span class="st"> &quot;real&quot;</span> <span class="op">~</span><span class="st"> </span>SlideTarget.RESP,</a>
<a class="sourceLine" id="cb193-43" title="43">                              TrialProc <span class="op">==</span><span class="st"> &quot;practice&quot;</span> <span class="op">~</span><span class="st"> </span>PracSlideTarget.RESP),</a>
<a class="sourceLine" id="cb193-44" title="44">         <span class="dt">Response =</span> <span class="kw">case_when</span>(Response <span class="op">==</span><span class="st"> &quot;z&quot;</span> <span class="op">~</span><span class="st"> &quot;left&quot;</span>,</a>
<a class="sourceLine" id="cb193-45" title="45">                              Response <span class="op">==</span><span class="st"> &quot;{/}&quot;</span> <span class="op">~</span><span class="st"> &quot;right&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb193-46" title="46"><span class="st">  </span><span class="kw">select</span>(Subject, TrialProc, Trial, <span class="dt">Condition =</span> FlankerType, </a>
<a class="sourceLine" id="cb193-47" title="47">         RT, Accuracy, Response, TargetArrowDirection, </a>
<a class="sourceLine" id="cb193-48" title="48">         SessionDate, SessionTime)</a>
<a class="sourceLine" id="cb193-49" title="49"><span class="co">#####################</span></a>
<a class="sourceLine" id="cb193-50" title="50"></a>
<a class="sourceLine" id="cb193-51" title="51"><span class="co">## Output ####</span></a>
<a class="sourceLine" id="cb193-52" title="52"><span class="kw">write_csv</span>(data_raw, <span class="kw">here</span>(output.dir, output.file))</a>
<a class="sourceLine" id="cb193-53" title="53"><span class="co">##############</span></a>
<a class="sourceLine" id="cb193-54" title="54"></a>
<a class="sourceLine" id="cb193-55" title="55"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a></code></pre></div>
<p>Great! You have written an R script for the first step in Data Preparation, converting a <em>messy</em> raw data file to a <em>tidy</em> raw data file.</p>
</div>
<div id="copy-and-paste" class="section level2">
<h2><span class="header-section-number">10.5</span> Copy and Paste</h2>
<p>Notice how pretty much everything except the <em>Tidy</em> block can be used from one task script to another. Besides the <em>Tidy</em> block, you basically would just have to change the <code>task</code>, <code>import.file</code>, and <code>output.file</code> objects. The <em>Import</em> and <em>Output</em> blocks can literally be copy and pasted without changing anything at all.</p>
<p>The only thing that changes is what happens inside of <code>filter()</code>, <code>rename()</code>, <code>mutate()</code>, and <code>select()</code>. This means you can spend less time thinking about how you need to organize your script, and importing and outputing files. Instead, you can focus on the meat of the script, what happens in the <em>Tidy</em> block.</p>
</div>
<div id="masterscript-1" class="section level2">
<h2><span class="header-section-number">10.6</span> Masterscript</h2>
<p>Finally, you should add a line of code to the masterscript that <em>sources</em> the file <strong>0_flanker_raw.R</strong>.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1"><span class="kw">source</span>(<span class="kw">here</span>(<span class="st">&quot;R Scripts&quot;</span>, <span class="st">&quot;0_flanker_raw.R&quot;</span>), <span class="dt">echo =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<hr />
<hr />
<p><strong>Something</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="merging-individual-subject-files.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-cleaning-and-scoring.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

</body>

</html>
